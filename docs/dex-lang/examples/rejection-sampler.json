{"nodeMapUpdate":[[0,{"contents":[{"rsbBlockId":0,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"></span></div>","rsbLexemeList":[],"rsbLine":0,"rsbNumLines":0,"rsbText":""},"Complete",[{"contents":[[0,0]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[0,"HighlightGroup"]],"tnSpan":[0,0],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"}]],"tag":"Create"}],[1,{"contents":[{"rsbBlockId":1,"rsbHtml":"<div class=\"prose-block\"><h1>Rejection Sampler for a Binomial Distribution</h1>\n</div>","rsbLexemeList":[],"rsbLine":1,"rsbNumLines":2,"rsbText":"'# Rejection Sampler for a Binomial Distribution\n\n"},"Inert",[]],"tag":"Create"}],[2,{"contents":[{"rsbBlockId":2,"rsbHtml":"<div class=\"prose-block\"><p>We implement rejection sampling from a Binomial distribution using a uniform proposal.</p>\n</div>","rsbLexemeList":[],"rsbLine":3,"rsbNumLines":2,"rsbText":"'We implement rejection sampling from a Binomial distribution using a uniform proposal.\n\n"},"Inert",[]],"tag":"Create"}],[3,{"contents":[{"rsbBlockId":3,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_3_2\">def</span><span> </span><span id=\"span_3_3\">rejectionSample</span><span class=\"symbol\" id=\"span_3_5\">(</span><span id=\"span_3_6\">try</span><span class=\"symbol\" id=\"span_3_7\">:</span><span> </span><span class=\"symbol\" id=\"span_3_10\">(</span><span id=\"span_3_11\">Key</span><span class=\"symbol\" id=\"span_3_12\">)</span><span> </span><span class=\"symbol\" id=\"span_3_13\">-&gt;</span><span> </span><span id=\"span_3_15\">Maybe</span><span> </span><span id=\"span_3_17\">a</span><span class=\"symbol\" id=\"span_3_18\">,</span><span> </span><span id=\"span_3_19\">k</span><span class=\"symbol\" id=\"span_3_20\">:</span><span id=\"span_3_22\">Key</span><span class=\"symbol\" id=\"span_3_23\">)</span><span> </span><span class=\"symbol\" id=\"span_3_24\">-&gt;</span><span> </span><span id=\"span_3_25\">a</span><span>  </span><span class=\"keyword\" id=\"span_3_26\">given</span><span> </span><span class=\"symbol\" id=\"span_3_28\">(</span><span id=\"span_3_29\">a</span><span class=\"symbol\" id=\"span_3_30\">|</span><span id=\"span_3_32\">Data</span><span class=\"symbol\" id=\"span_3_33\">)</span><span> </span><span class=\"symbol\" id=\"span_3_34\">=</span><span class=\"comment\">\n  </span><span id=\"span_3_37\">iter</span><span> </span><span class=\"symbol\" id=\"span_3_40\">\\</span><span id=\"span_3_41\">i</span><span class=\"symbol\" id=\"span_3_42\">.</span><span> </span><span class=\"keyword\" id=\"span_3_44\">case</span><span> </span><span id=\"span_3_45\">try</span><span> </span><span class=\"symbol\" id=\"span_3_46\">$</span><span> </span><span id=\"span_3_48\">hash</span><span> </span><span id=\"span_3_50\">k</span><span> </span><span id=\"span_3_52\">i</span><span> </span><span class=\"keyword\" id=\"span_3_53\">of</span><span class=\"comment\">\n    </span><span id=\"span_3_54\">Nothing</span><span> </span><span class=\"symbol\" id=\"span_3_55\">-&gt;</span><span> </span><span id=\"span_3_56\">Continue</span><span class=\"comment\">\n    </span><span id=\"span_3_57\">Just</span><span> </span><span id=\"span_3_59\">x</span><span>  </span><span class=\"symbol\" id=\"span_3_60\">-&gt;</span><span> </span><span id=\"span_3_61\">Done</span><span> </span><span id=\"span_3_63\">x</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[2,3,5,6,7,10,11,12,13,15,17,18,19,20,22,23,24,25,26,28,29,30,32,33,34,37,40,41,42,44,45,46,48,50,52,53,54,55,56,57,59,60,61,63],"rsbLine":5,"rsbNumLines":4,"rsbText":"def rejectionSample(try: (Key) -> Maybe a, k:Key) -> a  given (a|Data) =\n  iter \\i. case try $ hash k i of\n    Nothing -> Continue\n    Just x  -> Done x\n"},"Complete",[{"contents":[[2,1],[3,3],[5,4],[6,6],[7,8],[10,9],[11,11],[12,9],[13,14],[15,15],[17,17],[18,4],[19,19],[20,21],[22,22],[23,4],[24,1],[25,25],[26,1],[28,27],[29,29],[30,31],[32,32],[33,27],[34,1],[37,37],[40,39],[41,41],[42,39],[44,43],[45,45],[46,47],[48,48],[50,50],[52,52],[53,43],[54,54],[55,43],[56,56],[57,57],[59,59],[60,43],[61,61],[63,63]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[1,"HighlightGroup"]],"tnSpan":[2,63],"tnText":""},"tag":"Create"}],[1,{"contents":{"tnHighlights":[[2,"HighlightLeaf"],[24,"HighlightLeaf"],[26,"HighlightLeaf"],[34,"HighlightLeaf"],[3,"HighlightGroup"],[4,"HighlightGroup"],[25,"HighlightGroup"],[27,"HighlightGroup"],[35,"HighlightGroup"]],"tnSpan":[2,63],"tnText":""},"tag":"Create"}],[2,{"contents":{"tnHighlights":[[2,"HighlightGroup"]],"tnSpan":[2,2],"tnText":""},"tag":"Create"}],[3,{"contents":{"tnHighlights":[[3,"HighlightGroup"]],"tnSpan":[3,3],"tnText":""},"tag":"Create"}],[4,{"contents":{"tnHighlights":[[5,"HighlightLeaf"],[18,"HighlightLeaf"],[23,"HighlightLeaf"],[8,"HighlightGroup"],[21,"HighlightGroup"]],"tnSpan":[5,23],"tnText":""},"tag":"Create"}],[5,{"contents":{"tnHighlights":[[5,"HighlightGroup"]],"tnSpan":[5,5],"tnText":""},"tag":"Create"}],[6,{"contents":{"tnHighlights":[[6,"HighlightGroup"]],"tnSpan":[6,6],"tnText":""},"tag":"Create"}],[7,{"contents":{"tnHighlights":[[7,"HighlightGroup"]],"tnSpan":[7,7],"tnText":""},"tag":"Create"}],[8,{"contents":{"tnHighlights":[[7,"HighlightLeaf"],[6,"HighlightGroup"],[14,"HighlightGroup"]],"tnSpan":[6,17],"tnText":""},"tag":"Create"}],[9,{"contents":{"tnHighlights":[[10,"HighlightLeaf"],[12,"HighlightLeaf"],[11,"HighlightGroup"]],"tnSpan":[10,12],"tnText":""},"tag":"Create"}],[10,{"contents":{"tnHighlights":[[10,"HighlightGroup"]],"tnSpan":[10,10],"tnText":""},"tag":"Create"}],[11,{"contents":{"tnHighlights":[[11,"HighlightGroup"]],"tnSpan":[11,11],"tnText":""},"tag":"Create"}],[12,{"contents":{"tnHighlights":[[12,"HighlightGroup"]],"tnSpan":[12,12],"tnText":""},"tag":"Create"}],[13,{"contents":{"tnHighlights":[[13,"HighlightGroup"]],"tnSpan":[13,13],"tnText":""},"tag":"Create"}],[14,{"contents":{"tnHighlights":[[13,"HighlightLeaf"],[9,"HighlightGroup"],[16,"HighlightGroup"]],"tnSpan":[10,17],"tnText":""},"tag":"Create"}],[15,{"contents":{"tnHighlights":[[15,"HighlightGroup"]],"tnSpan":[15,15],"tnText":""},"tag":"Create"}],[16,{"contents":{"tnHighlights":[[15,"HighlightGroup"],[17,"HighlightGroup"]],"tnSpan":[15,17],"tnText":""},"tag":"Create"}],[17,{"contents":{"tnHighlights":[[17,"HighlightGroup"]],"tnSpan":[17,17],"tnText":""},"tag":"Create"}],[18,{"contents":{"tnHighlights":[[18,"HighlightGroup"]],"tnSpan":[18,18],"tnText":""},"tag":"Create"}],[19,{"contents":{"tnHighlights":[[19,"HighlightGroup"]],"tnSpan":[19,19],"tnText":""},"tag":"Create"}],[20,{"contents":{"tnHighlights":[[20,"HighlightGroup"]],"tnSpan":[20,20],"tnText":""},"tag":"Create"}],[21,{"contents":{"tnHighlights":[[20,"HighlightLeaf"],[19,"HighlightGroup"],[22,"HighlightGroup"]],"tnSpan":[19,22],"tnText":""},"tag":"Create"}],[22,{"contents":{"tnHighlights":[[22,"HighlightGroup"]],"tnSpan":[22,22],"tnText":""},"tag":"Create"}],[23,{"contents":{"tnHighlights":[[23,"HighlightGroup"]],"tnSpan":[23,23],"tnText":""},"tag":"Create"}],[24,{"contents":{"tnHighlights":[[24,"HighlightGroup"]],"tnSpan":[24,24],"tnText":""},"tag":"Create"}],[25,{"contents":{"tnHighlights":[[25,"HighlightGroup"]],"tnSpan":[25,25],"tnText":""},"tag":"Create"}],[26,{"contents":{"tnHighlights":[[26,"HighlightGroup"]],"tnSpan":[26,26],"tnText":""},"tag":"Create"}],[27,{"contents":{"tnHighlights":[[28,"HighlightLeaf"],[33,"HighlightLeaf"],[31,"HighlightGroup"]],"tnSpan":[28,33],"tnText":""},"tag":"Create"}],[28,{"contents":{"tnHighlights":[[28,"HighlightGroup"]],"tnSpan":[28,28],"tnText":""},"tag":"Create"}],[29,{"contents":{"tnHighlights":[[29,"HighlightGroup"]],"tnSpan":[29,29],"tnText":""},"tag":"Create"}],[30,{"contents":{"tnHighlights":[[30,"HighlightGroup"]],"tnSpan":[30,30],"tnText":""},"tag":"Create"}],[31,{"contents":{"tnHighlights":[[30,"HighlightLeaf"],[29,"HighlightGroup"],[32,"HighlightGroup"]],"tnSpan":[29,32],"tnText":""},"tag":"Create"}],[32,{"contents":{"tnHighlights":[[32,"HighlightGroup"]],"tnSpan":[32,32],"tnText":""},"tag":"Create"}],[33,{"contents":{"tnHighlights":[[33,"HighlightGroup"]],"tnSpan":[33,33],"tnText":""},"tag":"Create"}],[34,{"contents":{"tnHighlights":[[34,"HighlightGroup"]],"tnSpan":[34,34],"tnText":""},"tag":"Create"}],[35,{"contents":{"tnHighlights":[[36,"HighlightGroup"]],"tnSpan":[37,63],"tnText":""},"tag":"Create"}],[36,{"contents":{"tnHighlights":[[38,"HighlightGroup"]],"tnSpan":[37,63],"tnText":""},"tag":"Create"}],[37,{"contents":{"tnHighlights":[[37,"HighlightGroup"]],"tnSpan":[37,37],"tnText":""},"tag":"Create"}],[38,{"contents":{"tnHighlights":[[37,"HighlightGroup"],[39,"HighlightGroup"]],"tnSpan":[37,63],"tnText":""},"tag":"Create"}],[39,{"contents":{"tnHighlights":[[40,"HighlightLeaf"],[42,"HighlightLeaf"],[41,"HighlightGroup"],[43,"HighlightGroup"]],"tnSpan":[40,63],"tnText":""},"tag":"Create"}],[40,{"contents":{"tnHighlights":[[40,"HighlightGroup"]],"tnSpan":[40,40],"tnText":""},"tag":"Create"}],[41,{"contents":{"tnHighlights":[[41,"HighlightGroup"]],"tnSpan":[41,41],"tnText":""},"tag":"Create"}],[42,{"contents":{"tnHighlights":[[42,"HighlightGroup"]],"tnSpan":[42,42],"tnText":""},"tag":"Create"}],[43,{"contents":{"tnHighlights":[[44,"HighlightLeaf"],[53,"HighlightLeaf"],[55,"HighlightLeaf"],[60,"HighlightLeaf"],[47,"HighlightGroup"],[54,"HighlightGroup"],[56,"HighlightGroup"],[58,"HighlightGroup"],[62,"HighlightGroup"]],"tnSpan":[44,63],"tnText":""},"tag":"Create"}],[44,{"contents":{"tnHighlights":[[44,"HighlightGroup"]],"tnSpan":[44,44],"tnText":""},"tag":"Create"}],[45,{"contents":{"tnHighlights":[[45,"HighlightGroup"]],"tnSpan":[45,45],"tnText":""},"tag":"Create"}],[46,{"contents":{"tnHighlights":[[46,"HighlightGroup"]],"tnSpan":[46,46],"tnText":""},"tag":"Create"}],[47,{"contents":{"tnHighlights":[[46,"HighlightLeaf"],[45,"HighlightGroup"],[51,"HighlightGroup"]],"tnSpan":[45,52],"tnText":""},"tag":"Create"}],[48,{"contents":{"tnHighlights":[[48,"HighlightGroup"]],"tnSpan":[48,48],"tnText":""},"tag":"Create"}],[49,{"contents":{"tnHighlights":[[48,"HighlightGroup"],[50,"HighlightGroup"]],"tnSpan":[48,50],"tnText":""},"tag":"Create"}],[50,{"contents":{"tnHighlights":[[50,"HighlightGroup"]],"tnSpan":[50,50],"tnText":""},"tag":"Create"}],[51,{"contents":{"tnHighlights":[[49,"HighlightGroup"],[52,"HighlightGroup"]],"tnSpan":[48,52],"tnText":""},"tag":"Create"}],[52,{"contents":{"tnHighlights":[[52,"HighlightGroup"]],"tnSpan":[52,52],"tnText":""},"tag":"Create"}],[53,{"contents":{"tnHighlights":[[53,"HighlightGroup"]],"tnSpan":[53,53],"tnText":""},"tag":"Create"}],[54,{"contents":{"tnHighlights":[[54,"HighlightGroup"]],"tnSpan":[54,54],"tnText":""},"tag":"Create"}],[55,{"contents":{"tnHighlights":[[55,"HighlightGroup"]],"tnSpan":[55,55],"tnText":""},"tag":"Create"}],[56,{"contents":{"tnHighlights":[[56,"HighlightGroup"]],"tnSpan":[56,56],"tnText":""},"tag":"Create"}],[57,{"contents":{"tnHighlights":[[57,"HighlightGroup"]],"tnSpan":[57,57],"tnText":""},"tag":"Create"}],[58,{"contents":{"tnHighlights":[[57,"HighlightGroup"],[59,"HighlightGroup"]],"tnSpan":[57,59],"tnText":""},"tag":"Create"}],[59,{"contents":{"tnHighlights":[[59,"HighlightGroup"]],"tnSpan":[59,59],"tnText":""},"tag":"Create"}],[60,{"contents":{"tnHighlights":[[60,"HighlightGroup"]],"tnSpan":[60,60],"tnText":""},"tag":"Create"}],[61,{"contents":{"tnHighlights":[[61,"HighlightGroup"]],"tnSpan":[61,61],"tnText":""},"tag":"Create"}],[62,{"contents":{"tnHighlights":[[61,"HighlightGroup"],[63,"HighlightGroup"]],"tnSpan":[61,63],"tnText":""},"tag":"Create"}],[63,{"contents":{"tnHighlights":[[63,"HighlightGroup"]],"tnSpan":[63,63],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[3,{"contents":{"tnuHighlights":[[3,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[6,{"contents":{"tnuHighlights":[[6,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[11,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[15,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[17,{"contents":{"tnuHighlights":[[29,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[17,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[19,{"contents":{"tnuHighlights":[[19,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[22,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[25,{"contents":{"tnuHighlights":[[29,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[25,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[29,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[[29,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[32,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Data(a:Type)\n  do_not_implement_this_interface_for_the_compiler_relies_on_the_invariant_it_protects : (a) -> a\n"]},"tag":"Update"}],[37,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef iter(body: (Nat) -> {|eff} IterResult a) -> {|eff} a given (a|Data, eff:Effects) =\n  result = yield_state (Nothing::Maybe a) \\resultRef.\n    i <- with_state (0::Nat)\n    while \\.\n      continue = is_nothing $ get resultRef\n      if continue then\n        case body(get(i)) of\n          Continue -> i := get i + 1\n          Done(result) -> resultRef := Just result\n      continue\n  case result of\n    Just(ans) -> ans\n    Nothing -> unreachable()\n"]},"tag":"Update"}],[41,{"contents":{"tnuHighlights":[[41,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[45,{"contents":{"tnuHighlights":[[6,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[6,{"contents":{"tnuHighlights":[[45,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[48,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef hash(x:Key, y:Nat) -> Key =\n  y64 = n_to_w64 y\n  threefry_2x32(x, y64)\n"]},"tag":"Update"}],[50,{"contents":{"tnuHighlights":[[19,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[19,{"contents":{"tnuHighlights":[[50,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[52,{"contents":{"tnuHighlights":[[41,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[41,{"contents":{"tnuHighlights":[[52,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[54,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[56,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum IterResult(a|Data) =\n  Continue\n  Done(a)\n"]},"tag":"Update"}],[57,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[59,{"contents":{"tnuHighlights":[[59,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[61,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum IterResult(a|Data) =\n  Continue\n  Done(a)\n"]},"tag":"Update"}],[63,{"contents":{"tnuHighlights":[[59,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[59,{"contents":{"tnuHighlights":[[63,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[1,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Data a)](try:((v#1:Word64) -> (Maybe a)),k:Word64) -> a)"]},"tag":"Update"}],[6,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((v#1:Word64) -> (Maybe a))"]},"tag":"Update"}],[11,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[14,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[15,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((a:Type) -> Type)"]},"tag":"Update"}],[16,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[17,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[19,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[22,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[25,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[29,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[32,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[37,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Data a)]{eff:EffKind}(body:((v#1:Nat) -> {|eff} (IterResult\n                                                                  a))) -> {|eff} a)"]},"tag":"Update"}],[38,{"contents":{"tnuHighlights":[],"tnuText":["Type:   a"]},"tag":"Update"}],[41,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[43,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (IterResult a)"]},"tag":"Update"}],[45,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((v#1:Word64) -> (Maybe a))"]},"tag":"Update"}],[47,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Maybe a)"]},"tag":"Update"}],[48,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Word64,y:Nat) -> Word64)"]},"tag":"Update"}],[50,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[51,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[52,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[56,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (IterResult a)"]},"tag":"Update"}],[59,{"contents":{"tnuHighlights":[],"tnuText":["Type:   a"]},"tag":"Update"}],[61,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a.1:Type}[v#4:(Data a.1)](v#5:a.1) -> (IterResult a.1))"]},"tag":"Update"}],[62,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (IterResult a)"]},"tag":"Update"}],[63,{"contents":{"tnuHighlights":[],"tnuText":["Type:   a"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[4,{"contents":[{"rsbBlockId":4,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":9,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[5,{"contents":[{"rsbBlockId":5,"rsbHtml":"<div class=\"code-block\"><span id=\"span_5_65\">Prob</span><span>    </span><span class=\"symbol\" id=\"span_5_66\">=</span><span> </span><span id=\"span_5_67\">Float</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[65,66,67],"rsbLine":10,"rsbNumLines":1,"rsbText":"Prob    = Float\n"},"Complete",[{"contents":[[65,65],[66,64],[67,67]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[64,"HighlightGroup"]],"tnSpan":[65,67],"tnText":""},"tag":"Create"}],[64,{"contents":{"tnHighlights":[[66,"HighlightLeaf"],[65,"HighlightGroup"],[67,"HighlightGroup"]],"tnSpan":[65,67],"tnText":""},"tag":"Create"}],[65,{"contents":{"tnHighlights":[[65,"HighlightGroup"]],"tnSpan":[65,65],"tnText":""},"tag":"Create"}],[66,{"contents":{"tnHighlights":[[66,"HighlightGroup"]],"tnSpan":[66,66],"tnText":""},"tag":"Create"}],[67,{"contents":{"tnHighlights":[[67,"HighlightGroup"]],"tnSpan":[67,67],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[65,{"contents":{"tnuHighlights":[[65,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[67,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[67,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[6,{"contents":[{"rsbBlockId":6,"rsbHtml":"<div class=\"code-block\"><span id=\"span_6_69\">LogProb</span><span> </span><span class=\"symbol\" id=\"span_6_70\">=</span><span> </span><span id=\"span_6_71\">Float</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[69,70,71],"rsbLine":11,"rsbNumLines":1,"rsbText":"LogProb = Float\n"},"Complete",[{"contents":[[69,69],[70,68],[71,71]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[68,"HighlightGroup"]],"tnSpan":[69,71],"tnText":""},"tag":"Create"}],[68,{"contents":{"tnHighlights":[[70,"HighlightLeaf"],[69,"HighlightGroup"],[71,"HighlightGroup"]],"tnSpan":[69,71],"tnText":""},"tag":"Create"}],[69,{"contents":{"tnHighlights":[[69,"HighlightGroup"]],"tnSpan":[69,69],"tnText":""},"tag":"Create"}],[70,{"contents":{"tnHighlights":[[70,"HighlightGroup"]],"tnSpan":[70,70],"tnText":""},"tag":"Create"}],[71,{"contents":{"tnHighlights":[[71,"HighlightGroup"]],"tnSpan":[71,71],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[69,{"contents":{"tnuHighlights":[[69,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[71,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[71,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[7,{"contents":[{"rsbBlockId":7,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":12,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[8,{"contents":[{"rsbBlockId":8,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"># log probability density of a Binomial distribution\n</span></div>","rsbLexemeList":[],"rsbLine":13,"rsbNumLines":1,"rsbText":"# log probability density of a Binomial distribution\n"},"Inert",[]],"tag":"Create"}],[9,{"contents":[{"rsbBlockId":9,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_9_73\">def</span><span> </span><span id=\"span_9_74\">logBinomialProb</span><span class=\"symbol\" id=\"span_9_76\">(</span><span id=\"span_9_77\">n&#39;</span><span class=\"symbol\" id=\"span_9_78\">:</span><span id=\"span_9_80\">Nat</span><span class=\"symbol\" id=\"span_9_81\">,</span><span> </span><span id=\"span_9_82\">p</span><span class=\"symbol\" id=\"span_9_83\">:</span><span id=\"span_9_85\">Prob</span><span class=\"symbol\" id=\"span_9_86\">,</span><span> </span><span id=\"span_9_87\">counts&#39;</span><span class=\"symbol\" id=\"span_9_88\">:</span><span id=\"span_9_90\">Nat</span><span class=\"symbol\" id=\"span_9_91\">)</span><span> </span><span class=\"symbol\" id=\"span_9_92\">-&gt;</span><span> </span><span id=\"span_9_93\">LogProb</span><span> </span><span class=\"symbol\" id=\"span_9_94\">=</span><span class=\"comment\">\n  </span><span id=\"span_9_97\">n</span><span>      </span><span class=\"symbol\" id=\"span_9_98\">=</span><span> </span><span id=\"span_9_99\">n_to_f</span><span> </span><span id=\"span_9_101\">n&#39;</span><span class=\"comment\">\n  </span><span id=\"span_9_103\">counts</span><span> </span><span class=\"symbol\" id=\"span_9_104\">=</span><span> </span><span id=\"span_9_105\">n_to_f</span><span> </span><span id=\"span_9_107\">counts&#39;</span><span class=\"comment\">\n  </span><span id=\"span_9_109\">pSuccess</span><span> </span><span class=\"symbol\" id=\"span_9_110\">=</span><span> </span><span id=\"span_9_111\">log</span><span> </span><span id=\"span_9_113\">p</span><span> </span><span class=\"symbol\" id=\"span_9_114\">*</span><span> </span><span id=\"span_9_116\">counts</span><span class=\"comment\">\n  </span><span id=\"span_9_118\">pFailure</span><span> </span><span class=\"symbol\" id=\"span_9_119\">=</span><span> </span><span id=\"span_9_120\">log1p</span><span> </span><span class=\"symbol\" id=\"span_9_123\">(</span><span class=\"symbol\" id=\"span_9_124\">-</span><span id=\"span_9_126\">p</span><span class=\"symbol\" id=\"span_9_127\">)</span><span> </span><span class=\"symbol\" id=\"span_9_128\">*</span><span> </span><span class=\"symbol\" id=\"span_9_131\">(</span><span id=\"span_9_132\">n</span><span> </span><span class=\"symbol\" id=\"span_9_133\">-</span><span> </span><span id=\"span_9_135\">counts</span><span class=\"symbol\" id=\"span_9_136\">)</span><span class=\"comment\">\n  </span><span id=\"span_9_138\">normConst</span><span> </span><span class=\"symbol\" id=\"span_9_139\">=</span><span> </span><span class=\"symbol\" id=\"span_9_141\">(</span><span id=\"span_9_142\">lbeta</span><span> </span><span class=\"symbol\" id=\"span_9_145\">(</span><span class=\"literal\" id=\"span_9_146\">1.</span><span> </span><span class=\"symbol\" id=\"span_9_147\">+</span><span> </span><span id=\"span_9_149\">counts</span><span class=\"symbol\" id=\"span_9_150\">)</span><span> </span><span class=\"symbol\" id=\"span_9_153\">(</span><span class=\"literal\" id=\"span_9_154\">1.</span><span> </span><span class=\"symbol\" id=\"span_9_155\">+</span><span> </span><span id=\"span_9_157\">n</span><span> </span><span class=\"symbol\" id=\"span_9_158\">-</span><span> </span><span id=\"span_9_160\">counts</span><span class=\"symbol\" id=\"span_9_161\">)</span><span> </span><span class=\"symbol\" id=\"span_9_162\">+</span><span class=\"comment\">\n               </span><span id=\"span_9_164\">log1p</span><span> </span><span class=\"symbol\" id=\"span_9_167\">(</span><span id=\"span_9_168\">n</span><span class=\"symbol\" id=\"span_9_169\">)</span><span class=\"symbol\" id=\"span_9_170\">)</span><span class=\"comment\">\n  </span><span id=\"span_9_172\">pSuccess</span><span> </span><span class=\"symbol\" id=\"span_9_173\">+</span><span> </span><span id=\"span_9_175\">pFailure</span><span> </span><span class=\"symbol\" id=\"span_9_176\">-</span><span> </span><span id=\"span_9_178\">normConst</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[73,74,76,77,78,80,81,82,83,85,86,87,88,90,91,92,93,94,97,98,99,101,103,104,105,107,109,110,111,113,114,116,118,119,120,123,124,126,127,128,131,132,133,135,136,138,139,141,142,145,146,147,149,150,153,154,155,157,158,160,161,162,164,167,168,169,170,172,173,175,176,178],"rsbLine":14,"rsbNumLines":8,"rsbText":"def logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"},"Complete",[{"contents":[[73,72],[74,74],[76,75],[77,77],[78,79],[80,80],[81,75],[82,82],[83,84],[85,85],[86,75],[87,87],[88,89],[90,90],[91,75],[92,72],[93,93],[94,72],[97,97],[98,96],[99,99],[101,101],[103,103],[104,102],[105,105],[107,107],[109,109],[110,108],[111,111],[113,113],[114,114],[116,116],[118,118],[119,117],[120,120],[123,122],[124,124],[126,126],[127,122],[128,128],[131,130],[132,132],[133,133],[135,135],[136,130],[138,138],[139,137],[141,140],[142,142],[145,144],[146,146],[147,147],[149,149],[150,144],[153,152],[154,154],[155,155],[157,157],[158,158],[160,160],[161,152],[162,162],[164,164],[167,166],[168,168],[169,166],[170,140],[172,172],[173,173],[175,175],[176,176],[178,178]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[72,"HighlightGroup"]],"tnSpan":[73,178],"tnText":""},"tag":"Create"}],[72,{"contents":{"tnHighlights":[[73,"HighlightLeaf"],[92,"HighlightLeaf"],[94,"HighlightLeaf"],[74,"HighlightGroup"],[75,"HighlightGroup"],[93,"HighlightGroup"],[95,"HighlightGroup"]],"tnSpan":[73,178],"tnText":""},"tag":"Create"}],[73,{"contents":{"tnHighlights":[[73,"HighlightGroup"]],"tnSpan":[73,73],"tnText":""},"tag":"Create"}],[74,{"contents":{"tnHighlights":[[74,"HighlightGroup"]],"tnSpan":[74,74],"tnText":""},"tag":"Create"}],[75,{"contents":{"tnHighlights":[[76,"HighlightLeaf"],[81,"HighlightLeaf"],[86,"HighlightLeaf"],[91,"HighlightLeaf"],[79,"HighlightGroup"],[84,"HighlightGroup"],[89,"HighlightGroup"]],"tnSpan":[76,91],"tnText":""},"tag":"Create"}],[76,{"contents":{"tnHighlights":[[76,"HighlightGroup"]],"tnSpan":[76,76],"tnText":""},"tag":"Create"}],[77,{"contents":{"tnHighlights":[[77,"HighlightGroup"]],"tnSpan":[77,77],"tnText":""},"tag":"Create"}],[78,{"contents":{"tnHighlights":[[78,"HighlightGroup"]],"tnSpan":[78,78],"tnText":""},"tag":"Create"}],[79,{"contents":{"tnHighlights":[[78,"HighlightLeaf"],[77,"HighlightGroup"],[80,"HighlightGroup"]],"tnSpan":[77,80],"tnText":""},"tag":"Create"}],[80,{"contents":{"tnHighlights":[[80,"HighlightGroup"]],"tnSpan":[80,80],"tnText":""},"tag":"Create"}],[81,{"contents":{"tnHighlights":[[81,"HighlightGroup"]],"tnSpan":[81,81],"tnText":""},"tag":"Create"}],[82,{"contents":{"tnHighlights":[[82,"HighlightGroup"]],"tnSpan":[82,82],"tnText":""},"tag":"Create"}],[83,{"contents":{"tnHighlights":[[83,"HighlightGroup"]],"tnSpan":[83,83],"tnText":""},"tag":"Create"}],[84,{"contents":{"tnHighlights":[[83,"HighlightLeaf"],[82,"HighlightGroup"],[85,"HighlightGroup"]],"tnSpan":[82,85],"tnText":""},"tag":"Create"}],[85,{"contents":{"tnHighlights":[[85,"HighlightGroup"]],"tnSpan":[85,85],"tnText":""},"tag":"Create"}],[86,{"contents":{"tnHighlights":[[86,"HighlightGroup"]],"tnSpan":[86,86],"tnText":""},"tag":"Create"}],[87,{"contents":{"tnHighlights":[[87,"HighlightGroup"]],"tnSpan":[87,87],"tnText":""},"tag":"Create"}],[88,{"contents":{"tnHighlights":[[88,"HighlightGroup"]],"tnSpan":[88,88],"tnText":""},"tag":"Create"}],[89,{"contents":{"tnHighlights":[[88,"HighlightLeaf"],[87,"HighlightGroup"],[90,"HighlightGroup"]],"tnSpan":[87,90],"tnText":""},"tag":"Create"}],[90,{"contents":{"tnHighlights":[[90,"HighlightGroup"]],"tnSpan":[90,90],"tnText":""},"tag":"Create"}],[91,{"contents":{"tnHighlights":[[91,"HighlightGroup"]],"tnSpan":[91,91],"tnText":""},"tag":"Create"}],[92,{"contents":{"tnHighlights":[[92,"HighlightGroup"]],"tnSpan":[92,92],"tnText":""},"tag":"Create"}],[93,{"contents":{"tnHighlights":[[93,"HighlightGroup"]],"tnSpan":[93,93],"tnText":""},"tag":"Create"}],[94,{"contents":{"tnHighlights":[[94,"HighlightGroup"]],"tnSpan":[94,94],"tnText":""},"tag":"Create"}],[95,{"contents":{"tnHighlights":[[96,"HighlightGroup"],[102,"HighlightGroup"],[108,"HighlightGroup"],[117,"HighlightGroup"],[137,"HighlightGroup"],[171,"HighlightGroup"]],"tnSpan":[97,178],"tnText":""},"tag":"Create"}],[96,{"contents":{"tnHighlights":[[98,"HighlightLeaf"],[97,"HighlightGroup"],[100,"HighlightGroup"]],"tnSpan":[97,101],"tnText":""},"tag":"Create"}],[97,{"contents":{"tnHighlights":[[97,"HighlightGroup"]],"tnSpan":[97,97],"tnText":""},"tag":"Create"}],[98,{"contents":{"tnHighlights":[[98,"HighlightGroup"]],"tnSpan":[98,98],"tnText":""},"tag":"Create"}],[99,{"contents":{"tnHighlights":[[99,"HighlightGroup"]],"tnSpan":[99,99],"tnText":""},"tag":"Create"}],[100,{"contents":{"tnHighlights":[[99,"HighlightGroup"],[101,"HighlightGroup"]],"tnSpan":[99,101],"tnText":""},"tag":"Create"}],[101,{"contents":{"tnHighlights":[[101,"HighlightGroup"]],"tnSpan":[101,101],"tnText":""},"tag":"Create"}],[102,{"contents":{"tnHighlights":[[104,"HighlightLeaf"],[103,"HighlightGroup"],[106,"HighlightGroup"]],"tnSpan":[103,107],"tnText":""},"tag":"Create"}],[103,{"contents":{"tnHighlights":[[103,"HighlightGroup"]],"tnSpan":[103,103],"tnText":""},"tag":"Create"}],[104,{"contents":{"tnHighlights":[[104,"HighlightGroup"]],"tnSpan":[104,104],"tnText":""},"tag":"Create"}],[105,{"contents":{"tnHighlights":[[105,"HighlightGroup"]],"tnSpan":[105,105],"tnText":""},"tag":"Create"}],[106,{"contents":{"tnHighlights":[[105,"HighlightGroup"],[107,"HighlightGroup"]],"tnSpan":[105,107],"tnText":""},"tag":"Create"}],[107,{"contents":{"tnHighlights":[[107,"HighlightGroup"]],"tnSpan":[107,107],"tnText":""},"tag":"Create"}],[108,{"contents":{"tnHighlights":[[110,"HighlightLeaf"],[109,"HighlightGroup"],[115,"HighlightGroup"]],"tnSpan":[109,116],"tnText":""},"tag":"Create"}],[109,{"contents":{"tnHighlights":[[109,"HighlightGroup"]],"tnSpan":[109,109],"tnText":""},"tag":"Create"}],[110,{"contents":{"tnHighlights":[[110,"HighlightGroup"]],"tnSpan":[110,110],"tnText":""},"tag":"Create"}],[111,{"contents":{"tnHighlights":[[111,"HighlightGroup"]],"tnSpan":[111,111],"tnText":""},"tag":"Create"}],[112,{"contents":{"tnHighlights":[[111,"HighlightGroup"],[113,"HighlightGroup"]],"tnSpan":[111,113],"tnText":""},"tag":"Create"}],[113,{"contents":{"tnHighlights":[[113,"HighlightGroup"]],"tnSpan":[113,113],"tnText":""},"tag":"Create"}],[114,{"contents":{"tnHighlights":[[114,"HighlightGroup"]],"tnSpan":[114,114],"tnText":""},"tag":"Create"}],[115,{"contents":{"tnHighlights":[[112,"HighlightGroup"],[114,"HighlightGroup"],[116,"HighlightGroup"]],"tnSpan":[111,116],"tnText":""},"tag":"Create"}],[116,{"contents":{"tnHighlights":[[116,"HighlightGroup"]],"tnSpan":[116,116],"tnText":""},"tag":"Create"}],[117,{"contents":{"tnHighlights":[[119,"HighlightLeaf"],[118,"HighlightGroup"],[129,"HighlightGroup"]],"tnSpan":[118,136],"tnText":""},"tag":"Create"}],[118,{"contents":{"tnHighlights":[[118,"HighlightGroup"]],"tnSpan":[118,118],"tnText":""},"tag":"Create"}],[119,{"contents":{"tnHighlights":[[119,"HighlightGroup"]],"tnSpan":[119,119],"tnText":""},"tag":"Create"}],[120,{"contents":{"tnHighlights":[[120,"HighlightGroup"]],"tnSpan":[120,120],"tnText":""},"tag":"Create"}],[121,{"contents":{"tnHighlights":[[120,"HighlightGroup"],[122,"HighlightGroup"]],"tnSpan":[120,127],"tnText":""},"tag":"Create"}],[122,{"contents":{"tnHighlights":[[123,"HighlightLeaf"],[127,"HighlightLeaf"],[125,"HighlightGroup"]],"tnSpan":[123,127],"tnText":""},"tag":"Create"}],[123,{"contents":{"tnHighlights":[[123,"HighlightGroup"]],"tnSpan":[123,123],"tnText":""},"tag":"Create"}],[124,{"contents":{"tnHighlights":[[124,"HighlightGroup"]],"tnSpan":[124,124],"tnText":""},"tag":"Create"}],[125,{"contents":{"tnHighlights":[[124,"HighlightGroup"],[126,"HighlightGroup"]],"tnSpan":[124,126],"tnText":""},"tag":"Create"}],[126,{"contents":{"tnHighlights":[[126,"HighlightGroup"]],"tnSpan":[126,126],"tnText":""},"tag":"Create"}],[127,{"contents":{"tnHighlights":[[127,"HighlightGroup"]],"tnSpan":[127,127],"tnText":""},"tag":"Create"}],[128,{"contents":{"tnHighlights":[[128,"HighlightGroup"]],"tnSpan":[128,128],"tnText":""},"tag":"Create"}],[129,{"contents":{"tnHighlights":[[121,"HighlightGroup"],[128,"HighlightGroup"],[130,"HighlightGroup"]],"tnSpan":[120,136],"tnText":""},"tag":"Create"}],[130,{"contents":{"tnHighlights":[[131,"HighlightLeaf"],[136,"HighlightLeaf"],[134,"HighlightGroup"]],"tnSpan":[131,136],"tnText":""},"tag":"Create"}],[131,{"contents":{"tnHighlights":[[131,"HighlightGroup"]],"tnSpan":[131,131],"tnText":""},"tag":"Create"}],[132,{"contents":{"tnHighlights":[[132,"HighlightGroup"]],"tnSpan":[132,132],"tnText":""},"tag":"Create"}],[133,{"contents":{"tnHighlights":[[133,"HighlightGroup"]],"tnSpan":[133,133],"tnText":""},"tag":"Create"}],[134,{"contents":{"tnHighlights":[[132,"HighlightGroup"],[133,"HighlightGroup"],[135,"HighlightGroup"]],"tnSpan":[132,135],"tnText":""},"tag":"Create"}],[135,{"contents":{"tnHighlights":[[135,"HighlightGroup"]],"tnSpan":[135,135],"tnText":""},"tag":"Create"}],[136,{"contents":{"tnHighlights":[[136,"HighlightGroup"]],"tnSpan":[136,136],"tnText":""},"tag":"Create"}],[137,{"contents":{"tnHighlights":[[139,"HighlightLeaf"],[138,"HighlightGroup"],[140,"HighlightGroup"]],"tnSpan":[138,170],"tnText":""},"tag":"Create"}],[138,{"contents":{"tnHighlights":[[138,"HighlightGroup"]],"tnSpan":[138,138],"tnText":""},"tag":"Create"}],[139,{"contents":{"tnHighlights":[[139,"HighlightGroup"]],"tnSpan":[139,139],"tnText":""},"tag":"Create"}],[140,{"contents":{"tnHighlights":[[141,"HighlightLeaf"],[170,"HighlightLeaf"],[163,"HighlightGroup"]],"tnSpan":[141,170],"tnText":""},"tag":"Create"}],[141,{"contents":{"tnHighlights":[[141,"HighlightGroup"]],"tnSpan":[141,141],"tnText":""},"tag":"Create"}],[142,{"contents":{"tnHighlights":[[142,"HighlightGroup"]],"tnSpan":[142,142],"tnText":""},"tag":"Create"}],[143,{"contents":{"tnHighlights":[[142,"HighlightGroup"],[144,"HighlightGroup"]],"tnSpan":[142,150],"tnText":""},"tag":"Create"}],[144,{"contents":{"tnHighlights":[[145,"HighlightLeaf"],[150,"HighlightLeaf"],[148,"HighlightGroup"]],"tnSpan":[145,150],"tnText":""},"tag":"Create"}],[145,{"contents":{"tnHighlights":[[145,"HighlightGroup"]],"tnSpan":[145,145],"tnText":""},"tag":"Create"}],[146,{"contents":{"tnHighlights":[[146,"HighlightGroup"]],"tnSpan":[146,146],"tnText":""},"tag":"Create"}],[147,{"contents":{"tnHighlights":[[147,"HighlightGroup"]],"tnSpan":[147,147],"tnText":""},"tag":"Create"}],[148,{"contents":{"tnHighlights":[[146,"HighlightGroup"],[147,"HighlightGroup"],[149,"HighlightGroup"]],"tnSpan":[146,149],"tnText":""},"tag":"Create"}],[149,{"contents":{"tnHighlights":[[149,"HighlightGroup"]],"tnSpan":[149,149],"tnText":""},"tag":"Create"}],[150,{"contents":{"tnHighlights":[[150,"HighlightGroup"]],"tnSpan":[150,150],"tnText":""},"tag":"Create"}],[151,{"contents":{"tnHighlights":[[143,"HighlightGroup"],[152,"HighlightGroup"]],"tnSpan":[142,161],"tnText":""},"tag":"Create"}],[152,{"contents":{"tnHighlights":[[153,"HighlightLeaf"],[161,"HighlightLeaf"],[159,"HighlightGroup"]],"tnSpan":[153,161],"tnText":""},"tag":"Create"}],[153,{"contents":{"tnHighlights":[[153,"HighlightGroup"]],"tnSpan":[153,153],"tnText":""},"tag":"Create"}],[154,{"contents":{"tnHighlights":[[154,"HighlightGroup"]],"tnSpan":[154,154],"tnText":""},"tag":"Create"}],[155,{"contents":{"tnHighlights":[[155,"HighlightGroup"]],"tnSpan":[155,155],"tnText":""},"tag":"Create"}],[156,{"contents":{"tnHighlights":[[154,"HighlightGroup"],[155,"HighlightGroup"],[157,"HighlightGroup"]],"tnSpan":[154,157],"tnText":""},"tag":"Create"}],[157,{"contents":{"tnHighlights":[[157,"HighlightGroup"]],"tnSpan":[157,157],"tnText":""},"tag":"Create"}],[158,{"contents":{"tnHighlights":[[158,"HighlightGroup"]],"tnSpan":[158,158],"tnText":""},"tag":"Create"}],[159,{"contents":{"tnHighlights":[[156,"HighlightGroup"],[158,"HighlightGroup"],[160,"HighlightGroup"]],"tnSpan":[154,160],"tnText":""},"tag":"Create"}],[160,{"contents":{"tnHighlights":[[160,"HighlightGroup"]],"tnSpan":[160,160],"tnText":""},"tag":"Create"}],[161,{"contents":{"tnHighlights":[[161,"HighlightGroup"]],"tnSpan":[161,161],"tnText":""},"tag":"Create"}],[162,{"contents":{"tnHighlights":[[162,"HighlightGroup"]],"tnSpan":[162,162],"tnText":""},"tag":"Create"}],[163,{"contents":{"tnHighlights":[[151,"HighlightGroup"],[162,"HighlightGroup"],[165,"HighlightGroup"]],"tnSpan":[142,169],"tnText":""},"tag":"Create"}],[164,{"contents":{"tnHighlights":[[164,"HighlightGroup"]],"tnSpan":[164,164],"tnText":""},"tag":"Create"}],[165,{"contents":{"tnHighlights":[[164,"HighlightGroup"],[166,"HighlightGroup"]],"tnSpan":[164,169],"tnText":""},"tag":"Create"}],[166,{"contents":{"tnHighlights":[[167,"HighlightLeaf"],[169,"HighlightLeaf"],[168,"HighlightGroup"]],"tnSpan":[167,169],"tnText":""},"tag":"Create"}],[167,{"contents":{"tnHighlights":[[167,"HighlightGroup"]],"tnSpan":[167,167],"tnText":""},"tag":"Create"}],[168,{"contents":{"tnHighlights":[[168,"HighlightGroup"]],"tnSpan":[168,168],"tnText":""},"tag":"Create"}],[169,{"contents":{"tnHighlights":[[169,"HighlightGroup"]],"tnSpan":[169,169],"tnText":""},"tag":"Create"}],[170,{"contents":{"tnHighlights":[[170,"HighlightGroup"]],"tnSpan":[170,170],"tnText":""},"tag":"Create"}],[171,{"contents":{"tnHighlights":[[177,"HighlightGroup"]],"tnSpan":[172,178],"tnText":""},"tag":"Create"}],[172,{"contents":{"tnHighlights":[[172,"HighlightGroup"]],"tnSpan":[172,172],"tnText":""},"tag":"Create"}],[173,{"contents":{"tnHighlights":[[173,"HighlightGroup"]],"tnSpan":[173,173],"tnText":""},"tag":"Create"}],[174,{"contents":{"tnHighlights":[[172,"HighlightGroup"],[173,"HighlightGroup"],[175,"HighlightGroup"]],"tnSpan":[172,175],"tnText":""},"tag":"Create"}],[175,{"contents":{"tnHighlights":[[175,"HighlightGroup"]],"tnSpan":[175,175],"tnText":""},"tag":"Create"}],[176,{"contents":{"tnHighlights":[[176,"HighlightGroup"]],"tnSpan":[176,176],"tnText":""},"tag":"Create"}],[177,{"contents":{"tnHighlights":[[174,"HighlightGroup"],[176,"HighlightGroup"],[178,"HighlightGroup"]],"tnSpan":[172,178],"tnText":""},"tag":"Create"}],[178,{"contents":{"tnHighlights":[[178,"HighlightGroup"]],"tnSpan":[178,178],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[74,{"contents":{"tnuHighlights":[[74,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[77,{"contents":{"tnuHighlights":[[77,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[80,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[[82,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[85,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[87,{"contents":{"tnuHighlights":[[87,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[90,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[93,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nLogProb = Float\n"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[99,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef n_to_f(x: Nat) -> Float   = nat_to_rep x | internal_cast\n"]},"tag":"Update"}],[101,{"contents":{"tnuHighlights":[[77,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[77,{"contents":{"tnuHighlights":[[101,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[105,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef n_to_f(x: Nat) -> Float   = nat_to_rep x | internal_cast\n"]},"tag":"Update"}],[107,{"contents":{"tnuHighlights":[[87,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[87,{"contents":{"tnuHighlights":[[107,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[109,{"contents":{"tnuHighlights":[[109,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[111,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[113,{"contents":{"tnuHighlights":[[82,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[[113,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[114,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Mul(a|Data)\n  (*) : (a, a) -> a\n  one : a\n"]},"tag":"Update"}],[116,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[116,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[118,{"contents":{"tnuHighlights":[[118,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[120,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[124,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef neg( v:a)          -> a given (a|VSpace) = (-1.0) .* v\n"]},"tag":"Update"}],[126,{"contents":{"tnuHighlights":[[82,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[[126,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[128,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Mul(a|Data)\n  (*) : (a, a) -> a\n  one : a\n"]},"tag":"Update"}],[132,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[132,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[133,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Sub(a|Add)\n  (-) : (a, a) -> a\n"]},"tag":"Update"}],[135,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[135,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[138,{"contents":{"tnuHighlights":[[138,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[142,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef lbeta(x:a, y:a) -> a given (a|Sub|Floating) = lgamma x + lgamma y - lgamma (x + y)\n"]},"tag":"Update"}],[147,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[149,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[149,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[155,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[157,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[157,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[158,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Sub(a|Add)\n  (-) : (a, a) -> a\n"]},"tag":"Update"}],[160,{"contents":{"tnuHighlights":[[103,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[[160,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[162,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[164,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[168,{"contents":{"tnuHighlights":[[97,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[[168,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[172,{"contents":{"tnuHighlights":[[109,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[109,{"contents":{"tnuHighlights":[[172,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[173,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[175,{"contents":{"tnuHighlights":[[118,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[118,{"contents":{"tnuHighlights":[[175,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[176,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Sub(a|Add)\n  (-) : (a, a) -> a\n"]},"tag":"Update"}],[178,{"contents":{"tnuHighlights":[[138,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[138,{"contents":{"tnuHighlights":[[178,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[72,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n_:Nat,p:Float32,counts_:Nat) -> Float32)"]},"tag":"Update"}],[77,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[80,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[82,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[85,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[87,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[90,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[93,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[97,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[99,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Nat) -> Float32)"]},"tag":"Update"}],[100,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[101,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[103,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[105,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Nat) -> Float32)"]},"tag":"Update"}],[106,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[107,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[109,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[111,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#2:(Floating a)](v#0:a) -> a)"]},"tag":"Update"}],[112,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[113,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[114,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#2:(Mul a)](v#3:a,v#4:a) -> a)"]},"tag":"Update"}],[115,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[116,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[118,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[120,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#4:(Floating a)](v#0:a) -> a)"]},"tag":"Update"}],[121,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[122,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[124,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(VSpace a)](v:a) -> a)"]},"tag":"Update"}],[126,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[128,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#4:(Mul a)](v#5:a,v#6:a) -> a)"]},"tag":"Update"}],[129,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[130,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[132,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[133,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#6:(Sub a)](v#7:a,v#8:a) -> a)"]},"tag":"Update"}],[135,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[138,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[140,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[142,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Sub a),v#1:(Floating a)](x:a,y:a) -> a)"]},"tag":"Update"}],[144,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[146,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[147,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#8:(Add a)](v#9:a,v#10:a) -> a)"]},"tag":"Update"}],[149,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[151,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[152,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[154,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[155,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#9:(Add a)](v#10:a,v#11:a) -> a)"]},"tag":"Update"}],[156,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[157,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[158,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#9:(Sub a)](v#10:a,v#11:a) -> a)"]},"tag":"Update"}],[160,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[162,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#8:(Add a)](v#9:a,v#10:a) -> a)"]},"tag":"Update"}],[164,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#12:(Floating a)](v#0:a) -> a)"]},"tag":"Update"}],[165,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[166,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[172,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[173,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#14:(Add a)](v#15:a,v#16:a) -> a)"]},"tag":"Update"}],[174,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[175,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[176,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#14:(Sub a)](v#15:a,v#16:a) -> a)"]},"tag":"Update"}],[177,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[178,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[10,{"contents":[{"rsbBlockId":10,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":22,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[11,{"contents":[{"rsbBlockId":11,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_11_180\">def</span><span> </span><span id=\"span_11_181\">trySampleBinomial</span><span class=\"symbol\" id=\"span_11_183\">(</span><span id=\"span_11_184\">n</span><span class=\"symbol\" id=\"span_11_185\">:</span><span id=\"span_11_187\">Nat</span><span class=\"symbol\" id=\"span_11_188\">,</span><span> </span><span id=\"span_11_189\">p</span><span class=\"symbol\" id=\"span_11_190\">:</span><span id=\"span_11_192\">Prob</span><span class=\"symbol\" id=\"span_11_193\">,</span><span> </span><span id=\"span_11_194\">k</span><span class=\"symbol\" id=\"span_11_195\">:</span><span id=\"span_11_197\">Key</span><span class=\"symbol\" id=\"span_11_198\">)</span><span> </span><span class=\"symbol\" id=\"span_11_199\">-&gt;</span><span> </span><span id=\"span_11_200\">Maybe</span><span> </span><span id=\"span_11_202\">Nat</span><span> </span><span class=\"symbol\" id=\"span_11_203\">=</span><span class=\"comment\">\n  </span><span class=\"symbol\" id=\"span_11_207\">[</span><span id=\"span_11_208\">k1</span><span class=\"symbol\" id=\"span_11_209\">,</span><span> </span><span id=\"span_11_210\">k2</span><span class=\"symbol\" id=\"span_11_211\">]</span><span> </span><span class=\"symbol\" id=\"span_11_212\">=</span><span> </span><span id=\"span_11_213\">split_key</span><span> </span><span id=\"span_11_215\">k</span><span class=\"comment\">\n  </span><span id=\"span_11_217\">proposal</span><span> </span><span class=\"symbol\" id=\"span_11_218\">=</span><span> </span><span id=\"span_11_219\">f_to_n</span><span> </span><span class=\"symbol\" id=\"span_11_220\">$</span><span> </span><span id=\"span_11_222\">floor</span><span> </span><span class=\"symbol\" id=\"span_11_223\">$</span><span> </span><span id=\"span_11_225\">rand</span><span> </span><span id=\"span_11_227\">k1</span><span> </span><span class=\"symbol\" id=\"span_11_228\">*</span><span> </span><span id=\"span_11_230\">n_to_f</span><span> </span><span class=\"symbol\" id=\"span_11_233\">(</span><span id=\"span_11_234\">n</span><span> </span><span class=\"symbol\" id=\"span_11_235\">+</span><span> </span><span class=\"literal\" id=\"span_11_237\">1</span><span class=\"symbol\" id=\"span_11_238\">)</span><span class=\"comment\">\n  </span><span class=\"keyword\" id=\"span_11_241\">if</span><span> </span><span id=\"span_11_242\">proposal</span><span> </span><span class=\"symbol\" id=\"span_11_243\">&gt;</span><span> </span><span id=\"span_11_245\">n</span><span class=\"comment\">\n    </span><span class=\"keyword\" id=\"span_11_246\">then</span><span> </span><span id=\"span_11_247\">Nothing</span><span class=\"comment\">\n    </span><span class=\"keyword\" id=\"span_11_248\">else</span><span class=\"comment\">\n      </span><span id=\"span_11_251\">acceptance</span><span> </span><span class=\"symbol\" id=\"span_11_252\">=</span><span> </span><span id=\"span_11_253\">log</span><span> </span><span class=\"symbol\" id=\"span_11_256\">(</span><span id=\"span_11_257\">rand</span><span> </span><span id=\"span_11_259\">k2</span><span class=\"symbol\" id=\"span_11_260\">)</span><span> </span><span class=\"symbol\" id=\"span_11_261\">&lt;</span><span> </span><span id=\"span_11_263\">logBinomialProb</span><span> </span><span id=\"span_11_265\">n</span><span> </span><span id=\"span_11_267\">p</span><span> </span><span id=\"span_11_269\">proposal</span><span class=\"comment\">\n      </span><span class=\"keyword\" id=\"span_11_272\">if</span><span> </span><span id=\"span_11_273\">acceptance</span><span class=\"comment\">\n        </span><span class=\"keyword\" id=\"span_11_274\">then</span><span> </span><span id=\"span_11_275\">Just</span><span> </span><span id=\"span_11_277\">proposal</span><span class=\"comment\">\n        </span><span class=\"keyword\" id=\"span_11_278\">else</span><span> </span><span id=\"span_11_279\">Nothing</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[180,181,183,184,185,187,188,189,190,192,193,194,195,197,198,199,200,202,203,207,208,209,210,211,212,213,215,217,218,219,220,222,223,225,227,228,230,233,234,235,237,238,241,242,243,245,246,247,248,251,252,253,256,257,259,260,261,263,265,267,269,272,273,274,275,277,278,279],"rsbLine":23,"rsbNumLines":10,"rsbText":"def trySampleBinomial(n:Nat, p:Prob, k:Key) -> Maybe Nat =\n  [k1, k2] = split_key k\n  proposal = f_to_n $ floor $ rand k1 * n_to_f (n + 1)\n  if proposal > n\n    then Nothing\n    else\n      acceptance = log (rand k2) < logBinomialProb n p proposal\n      if acceptance\n        then Just proposal\n        else Nothing\n"},"CompleteWithErrors",[{"contents":[[180,179],[181,181],[183,182],[184,184],[185,186],[187,187],[188,182],[189,189],[190,191],[192,192],[193,182],[194,194],[195,196],[197,197],[198,182],[199,179],[200,200],[202,202],[203,179],[207,206],[208,208],[209,206],[210,210],[211,206],[212,205],[213,213],[215,215],[217,217],[218,216],[219,219],[220,221],[222,222],[223,224],[225,225],[227,227],[228,228],[230,230],[233,232],[234,234],[235,235],[237,237],[238,232],[241,240],[242,242],[243,243],[245,245],[246,240],[247,247],[248,240],[251,251],[252,250],[253,253],[256,255],[257,257],[259,259],[260,255],[261,261],[263,263],[265,265],[267,267],[269,269],[272,271],[273,273],[274,271],[275,275],[277,277],[278,271],[279,279]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[179,"HighlightGroup"]],"tnSpan":[180,279],"tnText":""},"tag":"Create"}],[179,{"contents":{"tnHighlights":[[180,"HighlightLeaf"],[199,"HighlightLeaf"],[203,"HighlightLeaf"],[181,"HighlightGroup"],[182,"HighlightGroup"],[201,"HighlightGroup"],[204,"HighlightGroup"]],"tnSpan":[180,279],"tnText":""},"tag":"Create"}],[180,{"contents":{"tnHighlights":[[180,"HighlightGroup"]],"tnSpan":[180,180],"tnText":""},"tag":"Create"}],[181,{"contents":{"tnHighlights":[[181,"HighlightGroup"]],"tnSpan":[181,181],"tnText":""},"tag":"Create"}],[182,{"contents":{"tnHighlights":[[183,"HighlightLeaf"],[188,"HighlightLeaf"],[193,"HighlightLeaf"],[198,"HighlightLeaf"],[186,"HighlightGroup"],[191,"HighlightGroup"],[196,"HighlightGroup"]],"tnSpan":[183,198],"tnText":""},"tag":"Create"}],[183,{"contents":{"tnHighlights":[[183,"HighlightGroup"]],"tnSpan":[183,183],"tnText":""},"tag":"Create"}],[184,{"contents":{"tnHighlights":[[184,"HighlightGroup"]],"tnSpan":[184,184],"tnText":""},"tag":"Create"}],[185,{"contents":{"tnHighlights":[[185,"HighlightGroup"]],"tnSpan":[185,185],"tnText":""},"tag":"Create"}],[186,{"contents":{"tnHighlights":[[185,"HighlightLeaf"],[184,"HighlightGroup"],[187,"HighlightGroup"]],"tnSpan":[184,187],"tnText":""},"tag":"Create"}],[187,{"contents":{"tnHighlights":[[187,"HighlightGroup"]],"tnSpan":[187,187],"tnText":""},"tag":"Create"}],[188,{"contents":{"tnHighlights":[[188,"HighlightGroup"]],"tnSpan":[188,188],"tnText":""},"tag":"Create"}],[189,{"contents":{"tnHighlights":[[189,"HighlightGroup"]],"tnSpan":[189,189],"tnText":""},"tag":"Create"}],[190,{"contents":{"tnHighlights":[[190,"HighlightGroup"]],"tnSpan":[190,190],"tnText":""},"tag":"Create"}],[191,{"contents":{"tnHighlights":[[190,"HighlightLeaf"],[189,"HighlightGroup"],[192,"HighlightGroup"]],"tnSpan":[189,192],"tnText":""},"tag":"Create"}],[192,{"contents":{"tnHighlights":[[192,"HighlightGroup"]],"tnSpan":[192,192],"tnText":""},"tag":"Create"}],[193,{"contents":{"tnHighlights":[[193,"HighlightGroup"]],"tnSpan":[193,193],"tnText":""},"tag":"Create"}],[194,{"contents":{"tnHighlights":[[194,"HighlightGroup"]],"tnSpan":[194,194],"tnText":""},"tag":"Create"}],[195,{"contents":{"tnHighlights":[[195,"HighlightGroup"]],"tnSpan":[195,195],"tnText":""},"tag":"Create"}],[196,{"contents":{"tnHighlights":[[195,"HighlightLeaf"],[194,"HighlightGroup"],[197,"HighlightGroup"]],"tnSpan":[194,197],"tnText":""},"tag":"Create"}],[197,{"contents":{"tnHighlights":[[197,"HighlightGroup"]],"tnSpan":[197,197],"tnText":""},"tag":"Create"}],[198,{"contents":{"tnHighlights":[[198,"HighlightGroup"]],"tnSpan":[198,198],"tnText":""},"tag":"Create"}],[199,{"contents":{"tnHighlights":[[199,"HighlightGroup"]],"tnSpan":[199,199],"tnText":""},"tag":"Create"}],[200,{"contents":{"tnHighlights":[[200,"HighlightGroup"]],"tnSpan":[200,200],"tnText":""},"tag":"Create"}],[201,{"contents":{"tnHighlights":[[200,"HighlightGroup"],[202,"HighlightGroup"]],"tnSpan":[200,202],"tnText":""},"tag":"Create"}],[202,{"contents":{"tnHighlights":[[202,"HighlightGroup"]],"tnSpan":[202,202],"tnText":""},"tag":"Create"}],[203,{"contents":{"tnHighlights":[[203,"HighlightGroup"]],"tnSpan":[203,203],"tnText":""},"tag":"Create"}],[204,{"contents":{"tnHighlights":[[205,"HighlightGroup"],[216,"HighlightGroup"],[239,"HighlightGroup"]],"tnSpan":[207,279],"tnText":""},"tag":"Create"}],[205,{"contents":{"tnHighlights":[[212,"HighlightLeaf"],[206,"HighlightGroup"],[214,"HighlightGroup"]],"tnSpan":[207,215],"tnText":""},"tag":"Create"}],[206,{"contents":{"tnHighlights":[[207,"HighlightLeaf"],[209,"HighlightLeaf"],[211,"HighlightLeaf"],[208,"HighlightGroup"],[210,"HighlightGroup"]],"tnSpan":[207,211],"tnText":""},"tag":"Create"}],[207,{"contents":{"tnHighlights":[[207,"HighlightGroup"]],"tnSpan":[207,207],"tnText":""},"tag":"Create"}],[208,{"contents":{"tnHighlights":[[208,"HighlightGroup"]],"tnSpan":[208,208],"tnText":""},"tag":"Create"}],[209,{"contents":{"tnHighlights":[[209,"HighlightGroup"]],"tnSpan":[209,209],"tnText":""},"tag":"Create"}],[210,{"contents":{"tnHighlights":[[210,"HighlightGroup"]],"tnSpan":[210,210],"tnText":""},"tag":"Create"}],[211,{"contents":{"tnHighlights":[[211,"HighlightGroup"]],"tnSpan":[211,211],"tnText":""},"tag":"Create"}],[212,{"contents":{"tnHighlights":[[212,"HighlightGroup"]],"tnSpan":[212,212],"tnText":""},"tag":"Create"}],[213,{"contents":{"tnHighlights":[[213,"HighlightGroup"]],"tnSpan":[213,213],"tnText":""},"tag":"Create"}],[214,{"contents":{"tnHighlights":[[213,"HighlightGroup"],[215,"HighlightGroup"]],"tnSpan":[213,215],"tnText":""},"tag":"Create"}],[215,{"contents":{"tnHighlights":[[215,"HighlightGroup"]],"tnSpan":[215,215],"tnText":""},"tag":"Create"}],[216,{"contents":{"tnHighlights":[[218,"HighlightLeaf"],[217,"HighlightGroup"],[221,"HighlightGroup"]],"tnSpan":[217,238],"tnText":""},"tag":"Create"}],[217,{"contents":{"tnHighlights":[[217,"HighlightGroup"]],"tnSpan":[217,217],"tnText":""},"tag":"Create"}],[218,{"contents":{"tnHighlights":[[218,"HighlightGroup"]],"tnSpan":[218,218],"tnText":""},"tag":"Create"}],[219,{"contents":{"tnHighlights":[[219,"HighlightGroup"]],"tnSpan":[219,219],"tnText":""},"tag":"Create"}],[220,{"contents":{"tnHighlights":[[220,"HighlightGroup"]],"tnSpan":[220,220],"tnText":""},"tag":"Create"}],[221,{"contents":{"tnHighlights":[[220,"HighlightLeaf"],[219,"HighlightGroup"],[224,"HighlightGroup"]],"tnSpan":[219,238],"tnText":""},"tag":"Create"}],[222,{"contents":{"tnHighlights":[[222,"HighlightGroup"]],"tnSpan":[222,222],"tnText":""},"tag":"Create"}],[223,{"contents":{"tnHighlights":[[223,"HighlightGroup"]],"tnSpan":[223,223],"tnText":""},"tag":"Create"}],[224,{"contents":{"tnHighlights":[[223,"HighlightLeaf"],[222,"HighlightGroup"],[229,"HighlightGroup"]],"tnSpan":[222,238],"tnText":""},"tag":"Create"}],[225,{"contents":{"tnHighlights":[[225,"HighlightGroup"]],"tnSpan":[225,225],"tnText":""},"tag":"Create"}],[226,{"contents":{"tnHighlights":[[225,"HighlightGroup"],[227,"HighlightGroup"]],"tnSpan":[225,227],"tnText":""},"tag":"Create"}],[227,{"contents":{"tnHighlights":[[227,"HighlightGroup"]],"tnSpan":[227,227],"tnText":""},"tag":"Create"}],[228,{"contents":{"tnHighlights":[[228,"HighlightGroup"]],"tnSpan":[228,228],"tnText":""},"tag":"Create"}],[229,{"contents":{"tnHighlights":[[226,"HighlightGroup"],[228,"HighlightGroup"],[231,"HighlightGroup"]],"tnSpan":[225,238],"tnText":""},"tag":"Create"}],[230,{"contents":{"tnHighlights":[[230,"HighlightGroup"]],"tnSpan":[230,230],"tnText":""},"tag":"Create"}],[231,{"contents":{"tnHighlights":[[230,"HighlightGroup"],[232,"HighlightGroup"]],"tnSpan":[230,238],"tnText":""},"tag":"Create"}],[232,{"contents":{"tnHighlights":[[233,"HighlightLeaf"],[238,"HighlightLeaf"],[236,"HighlightGroup"]],"tnSpan":[233,238],"tnText":""},"tag":"Create"}],[233,{"contents":{"tnHighlights":[[233,"HighlightGroup"]],"tnSpan":[233,233],"tnText":""},"tag":"Create"}],[234,{"contents":{"tnHighlights":[[234,"HighlightGroup"]],"tnSpan":[234,234],"tnText":""},"tag":"Create"}],[235,{"contents":{"tnHighlights":[[235,"HighlightGroup"]],"tnSpan":[235,235],"tnText":""},"tag":"Create"}],[236,{"contents":{"tnHighlights":[[234,"HighlightGroup"],[235,"HighlightGroup"],[237,"HighlightGroup"]],"tnSpan":[234,237],"tnText":""},"tag":"Create"}],[237,{"contents":{"tnHighlights":[[237,"HighlightGroup"]],"tnSpan":[237,237],"tnText":""},"tag":"Create"}],[238,{"contents":{"tnHighlights":[[238,"HighlightGroup"]],"tnSpan":[238,238],"tnText":""},"tag":"Create"}],[239,{"contents":{"tnHighlights":[[240,"HighlightGroup"]],"tnSpan":[241,279],"tnText":""},"tag":"Create"}],[240,{"contents":{"tnHighlights":[[241,"HighlightLeaf"],[246,"HighlightLeaf"],[248,"HighlightLeaf"],[244,"HighlightGroup"],[247,"HighlightGroup"],[249,"HighlightGroup"]],"tnSpan":[241,279],"tnText":""},"tag":"Create"}],[241,{"contents":{"tnHighlights":[[241,"HighlightGroup"]],"tnSpan":[241,241],"tnText":""},"tag":"Create"}],[242,{"contents":{"tnHighlights":[[242,"HighlightGroup"]],"tnSpan":[242,242],"tnText":""},"tag":"Create"}],[243,{"contents":{"tnHighlights":[[243,"HighlightGroup"]],"tnSpan":[243,243],"tnText":""},"tag":"Create"}],[244,{"contents":{"tnHighlights":[[242,"HighlightGroup"],[243,"HighlightGroup"],[245,"HighlightGroup"]],"tnSpan":[242,245],"tnText":""},"tag":"Create"}],[245,{"contents":{"tnHighlights":[[245,"HighlightGroup"]],"tnSpan":[245,245],"tnText":""},"tag":"Create"}],[246,{"contents":{"tnHighlights":[[246,"HighlightGroup"]],"tnSpan":[246,246],"tnText":""},"tag":"Create"}],[247,{"contents":{"tnHighlights":[[247,"HighlightGroup"]],"tnSpan":[247,247],"tnText":""},"tag":"Create"}],[248,{"contents":{"tnHighlights":[[248,"HighlightGroup"]],"tnSpan":[248,248],"tnText":""},"tag":"Create"}],[249,{"contents":{"tnHighlights":[[250,"HighlightGroup"],[270,"HighlightGroup"]],"tnSpan":[251,279],"tnText":""},"tag":"Create"}],[250,{"contents":{"tnHighlights":[[252,"HighlightLeaf"],[251,"HighlightGroup"],[262,"HighlightGroup"]],"tnSpan":[251,269],"tnText":""},"tag":"Create"}],[251,{"contents":{"tnHighlights":[[251,"HighlightGroup"]],"tnSpan":[251,251],"tnText":""},"tag":"Create"}],[252,{"contents":{"tnHighlights":[[252,"HighlightGroup"]],"tnSpan":[252,252],"tnText":""},"tag":"Create"}],[253,{"contents":{"tnHighlights":[[253,"HighlightGroup"]],"tnSpan":[253,253],"tnText":""},"tag":"Create"}],[254,{"contents":{"tnHighlights":[[253,"HighlightGroup"],[255,"HighlightGroup"]],"tnSpan":[253,260],"tnText":""},"tag":"Create"}],[255,{"contents":{"tnHighlights":[[256,"HighlightLeaf"],[260,"HighlightLeaf"],[258,"HighlightGroup"]],"tnSpan":[256,260],"tnText":""},"tag":"Create"}],[256,{"contents":{"tnHighlights":[[256,"HighlightGroup"]],"tnSpan":[256,256],"tnText":""},"tag":"Create"}],[257,{"contents":{"tnHighlights":[[257,"HighlightGroup"]],"tnSpan":[257,257],"tnText":""},"tag":"Create"}],[258,{"contents":{"tnHighlights":[[257,"HighlightGroup"],[259,"HighlightGroup"]],"tnSpan":[257,259],"tnText":""},"tag":"Create"}],[259,{"contents":{"tnHighlights":[[259,"HighlightGroup"]],"tnSpan":[259,259],"tnText":""},"tag":"Create"}],[260,{"contents":{"tnHighlights":[[260,"HighlightGroup"]],"tnSpan":[260,260],"tnText":""},"tag":"Create"}],[261,{"contents":{"tnHighlights":[[261,"HighlightGroup"]],"tnSpan":[261,261],"tnText":""},"tag":"Create"}],[262,{"contents":{"tnHighlights":[[254,"HighlightGroup"],[261,"HighlightGroup"],[268,"HighlightGroup"]],"tnSpan":[253,269],"tnText":""},"tag":"Create"}],[263,{"contents":{"tnHighlights":[[263,"HighlightGroup"]],"tnSpan":[263,263],"tnText":""},"tag":"Create"}],[264,{"contents":{"tnHighlights":[[263,"HighlightGroup"],[265,"HighlightGroup"]],"tnSpan":[263,265],"tnText":""},"tag":"Create"}],[265,{"contents":{"tnHighlights":[[265,"HighlightGroup"]],"tnSpan":[265,265],"tnText":""},"tag":"Create"}],[266,{"contents":{"tnHighlights":[[264,"HighlightGroup"],[267,"HighlightGroup"]],"tnSpan":[263,267],"tnText":""},"tag":"Create"}],[267,{"contents":{"tnHighlights":[[267,"HighlightGroup"]],"tnSpan":[267,267],"tnText":""},"tag":"Create"}],[268,{"contents":{"tnHighlights":[[266,"HighlightGroup"],[269,"HighlightGroup"]],"tnSpan":[263,269],"tnText":""},"tag":"Create"}],[269,{"contents":{"tnHighlights":[[269,"HighlightGroup"]],"tnSpan":[269,269],"tnText":""},"tag":"Create"}],[270,{"contents":{"tnHighlights":[[271,"HighlightGroup"]],"tnSpan":[272,279],"tnText":""},"tag":"Create"}],[271,{"contents":{"tnHighlights":[[272,"HighlightLeaf"],[274,"HighlightLeaf"],[278,"HighlightLeaf"],[273,"HighlightGroup"],[276,"HighlightGroup"],[279,"HighlightGroup"]],"tnSpan":[272,279],"tnText":""},"tag":"Create"}],[272,{"contents":{"tnHighlights":[[272,"HighlightGroup"]],"tnSpan":[272,272],"tnText":""},"tag":"Create"}],[273,{"contents":{"tnHighlights":[[273,"HighlightGroup"]],"tnSpan":[273,273],"tnText":""},"tag":"Create"}],[274,{"contents":{"tnHighlights":[[274,"HighlightGroup"]],"tnSpan":[274,274],"tnText":""},"tag":"Create"}],[275,{"contents":{"tnHighlights":[[275,"HighlightGroup"]],"tnSpan":[275,275],"tnText":""},"tag":"Create"}],[276,{"contents":{"tnHighlights":[[275,"HighlightGroup"],[277,"HighlightGroup"]],"tnSpan":[275,277],"tnText":""},"tag":"Create"}],[277,{"contents":{"tnHighlights":[[277,"HighlightGroup"]],"tnSpan":[277,277],"tnText":""},"tag":"Create"}],[278,{"contents":{"tnHighlights":[[278,"HighlightGroup"]],"tnSpan":[278,278],"tnText":""},"tag":"Create"}],[279,{"contents":{"tnHighlights":[[279,"HighlightGroup"]],"tnSpan":[279,279],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[181,{"contents":{"tnuHighlights":[[181,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[187,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[189,{"contents":{"tnuHighlights":[[189,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[192,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[194,{"contents":{"tnuHighlights":[[194,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[197,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[200,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[202,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[208,{"contents":{"tnuHighlights":[[208,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[210,{"contents":{"tnuHighlights":[[210,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[213,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef split_key(k:Key) -> Fin n => Key given (n:Nat) = for i. ixkey(k, i)\n"]},"tag":"Update"}],[215,{"contents":{"tnuHighlights":[[194,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[194,{"contents":{"tnuHighlights":[[215,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[219,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef f_to_n(x : Float)   -> Nat = internal_cast x | rep_to_nat\n"]},"tag":"Update"}],[222,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[225,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand(k:Key) -> Float =\n  exponent_bits : Word32 = 1065353216 # 1065353216 = 127 << 23\n  mantissa_bits = (high_word k .&. 8388607)  # 8388607 == (1 << 23) - 1\n  bits = exponent_bits .|. mantissa_bits\n  %bitcast(Float, bits) - 1.0\n"]},"tag":"Update"}],[227,{"contents":{"tnuHighlights":[[208,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[208,{"contents":{"tnuHighlights":[[227,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[228,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Mul(a|Data)\n  (*) : (a, a) -> a\n  one : a\n"]},"tag":"Update"}],[230,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef n_to_f(x: Nat) -> Float   = nat_to_rep x | internal_cast\n"]},"tag":"Update"}],[234,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[234,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[235,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[240,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Bool =\n  False\n  True\n"]},"tag":"Update"}],[242,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[242,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[243,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ord(a|Eq)\n  (>) : (a, a) -> Bool\n  (<) : (a, a) -> Bool\n"]},"tag":"Update"}],[245,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[245,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[247,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[251,{"contents":{"tnuHighlights":[[251,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[253,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Floating(a:Type)\n  exp    : (a) -> a\n  exp2   : (a) -> a\n  log    : (a) -> a\n  log2   : (a) -> a\n  log10  : (a) -> a\n  log1p  : (a) -> a\n  sin    : (a) -> a\n  cos    : (a) -> a\n  tan    : (a) -> a\n  sinh   : (a) -> a\n  cosh   : (a) -> a\n  tanh   : (a) -> a\n  floor  : (a) -> a\n  ceil   : (a) -> a\n  round  : (a) -> a\n  sqrt   : (a) -> a\n  pow    : (a, a) -> a\n  lgamma : (a) -> a\n  erf    : (a) -> a\n  erfc   : (a) -> a\n"]},"tag":"Update"}],[257,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand(k:Key) -> Float =\n  exponent_bits : Word32 = 1065353216 # 1065353216 = 127 << 23\n  mantissa_bits = (high_word k .&. 8388607)  # 8388607 == (1 << 23) - 1\n  bits = exponent_bits .|. mantissa_bits\n  %bitcast(Float, bits) - 1.0\n"]},"tag":"Update"}],[259,{"contents":{"tnuHighlights":[[210,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[210,{"contents":{"tnuHighlights":[[259,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[261,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ord(a|Eq)\n  (>) : (a, a) -> Bool\n  (<) : (a, a) -> Bool\n"]},"tag":"Update"}],[263,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"]},"tag":"Update"}],[265,{"contents":{"tnuHighlights":[[184,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[184,{"contents":{"tnuHighlights":[[265,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[267,{"contents":{"tnuHighlights":[[189,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[189,{"contents":{"tnuHighlights":[[267,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[269,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[269,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[271,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Bool =\n  False\n  True\n"]},"tag":"Update"}],[273,{"contents":{"tnuHighlights":[[251,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[251,{"contents":{"tnuHighlights":[[273,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[275,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}],[277,{"contents":{"tnuHighlights":[[217,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[217,{"contents":{"tnuHighlights":[[277,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[279,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nenum Maybe(a:Type) =\n  Nothing\n  Just(a)\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[184,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[187,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[189,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[192,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[194,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[197,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[200,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((a:Type) -> Type)"]},"tag":"Update"}],[201,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[202,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[213,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Nat}(k:Word64) -> ((Fin n) => Word64))"]},"tag":"Update"}],[215,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[214,"Type error: couldn't infer implicit argument `n` of split_key"],"tag":"RenderedError"}]],"tag":"Create"}],[12,{"contents":[{"rsbBlockId":12,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":33,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[13,{"contents":[{"rsbBlockId":13,"rsbHtml":"<div class=\"prose-block\"><h2>Example</h2>\n</div>","rsbLexemeList":[],"rsbLine":34,"rsbNumLines":2,"rsbText":"'## Example\n\n"},"Inert",[]],"tag":"Create"}],[14,{"contents":[{"rsbBlockId":14,"rsbHtml":"<div class=\"prose-block\"><p>We test the implementation by sampling from a Binomial distribution with 10 trials and success probability 0.4.</p>\n</div>","rsbLexemeList":[],"rsbLine":36,"rsbNumLines":2,"rsbText":"'We test the implementation by sampling from a Binomial distribution with 10 trials and success probability 0.4.\n\n"},"Inert",[]],"tag":"Create"}],[15,{"contents":[{"rsbBlockId":15,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"># parameters\n</span></div>","rsbLexemeList":[],"rsbLine":38,"rsbNumLines":1,"rsbText":"# parameters\n"},"Inert",[]],"tag":"Create"}],[16,{"contents":[{"rsbBlockId":16,"rsbHtml":"<div class=\"code-block\"><span id=\"span_16_281\">n</span><span> </span><span class=\"symbol\" id=\"span_16_282\">=</span><span> </span><span class=\"literal\" id=\"span_16_283\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[281,282,283],"rsbLine":39,"rsbNumLines":1,"rsbText":"n = 10\n"},"Complete",[{"contents":[[281,281],[282,280],[283,283]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[280,"HighlightGroup"]],"tnSpan":[281,283],"tnText":""},"tag":"Create"}],[280,{"contents":{"tnHighlights":[[282,"HighlightLeaf"],[281,"HighlightGroup"],[283,"HighlightGroup"]],"tnSpan":[281,283],"tnText":""},"tag":"Create"}],[281,{"contents":{"tnHighlights":[[281,"HighlightGroup"]],"tnSpan":[281,281],"tnText":""},"tag":"Create"}],[282,{"contents":{"tnHighlights":[[282,"HighlightGroup"]],"tnSpan":[282,282],"tnText":""},"tag":"Create"}],[283,{"contents":{"tnHighlights":[[283,"HighlightGroup"]],"tnSpan":[283,283],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[281,{"contents":{"tnuHighlights":[[281,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[283,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[17,{"contents":[{"rsbBlockId":17,"rsbHtml":"<div class=\"code-block\"><span id=\"span_17_285\">p</span><span> </span><span class=\"symbol\" id=\"span_17_286\">=</span><span> </span><span class=\"literal\" id=\"span_17_287\">0.4</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[285,286,287],"rsbLine":40,"rsbNumLines":1,"rsbText":"p = 0.4\n"},"Complete",[{"contents":[[285,285],[286,284],[287,287]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[284,"HighlightGroup"]],"tnSpan":[285,287],"tnText":""},"tag":"Create"}],[284,{"contents":{"tnHighlights":[[286,"HighlightLeaf"],[285,"HighlightGroup"],[287,"HighlightGroup"]],"tnSpan":[285,287],"tnText":""},"tag":"Create"}],[285,{"contents":{"tnHighlights":[[285,"HighlightGroup"]],"tnSpan":[285,285],"tnText":""},"tag":"Create"}],[286,{"contents":{"tnHighlights":[[286,"HighlightGroup"]],"tnSpan":[286,286],"tnText":""},"tag":"Create"}],[287,{"contents":{"tnHighlights":[[287,"HighlightGroup"]],"tnSpan":[287,287],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[285,{"contents":{"tnuHighlights":[[285,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[287,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[18,{"contents":[{"rsbBlockId":18,"rsbHtml":"<div class=\"code-block\"><span id=\"span_18_289\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_18_290\">=</span><span> </span><span class=\"literal\" id=\"span_18_291\">5000</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[289,290,291],"rsbLine":41,"rsbNumLines":1,"rsbText":"numSamples = 5000\n"},"Complete",[{"contents":[[289,289],[290,288],[291,291]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[288,"HighlightGroup"]],"tnSpan":[289,291],"tnText":""},"tag":"Create"}],[288,{"contents":{"tnHighlights":[[290,"HighlightLeaf"],[289,"HighlightGroup"],[291,"HighlightGroup"]],"tnSpan":[289,291],"tnText":""},"tag":"Create"}],[289,{"contents":{"tnHighlights":[[289,"HighlightGroup"]],"tnSpan":[289,289],"tnText":""},"tag":"Create"}],[290,{"contents":{"tnHighlights":[[290,"HighlightGroup"]],"tnSpan":[290,290],"tnText":""},"tag":"Create"}],[291,{"contents":{"tnHighlights":[[291,"HighlightGroup"]],"tnSpan":[291,291],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[289,{"contents":{"tnuHighlights":[[289,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[291,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[19,{"contents":[{"rsbBlockId":19,"rsbHtml":"<div class=\"code-block\"><span id=\"span_19_293\">k0</span><span> </span><span class=\"symbol\" id=\"span_19_294\">=</span><span> </span><span id=\"span_19_295\">new_key</span><span> </span><span class=\"literal\" id=\"span_19_297\">0</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[293,294,295,297],"rsbLine":42,"rsbNumLines":1,"rsbText":"k0 = new_key 0\n"},"Complete",[{"contents":[[293,293],[294,292],[295,295],[297,297]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[292,"HighlightGroup"]],"tnSpan":[293,297],"tnText":""},"tag":"Create"}],[292,{"contents":{"tnHighlights":[[294,"HighlightLeaf"],[293,"HighlightGroup"],[296,"HighlightGroup"]],"tnSpan":[293,297],"tnText":""},"tag":"Create"}],[293,{"contents":{"tnHighlights":[[293,"HighlightGroup"]],"tnSpan":[293,293],"tnText":""},"tag":"Create"}],[294,{"contents":{"tnHighlights":[[294,"HighlightGroup"]],"tnSpan":[294,294],"tnText":""},"tag":"Create"}],[295,{"contents":{"tnHighlights":[[295,"HighlightGroup"]],"tnSpan":[295,295],"tnText":""},"tag":"Create"}],[296,{"contents":{"tnHighlights":[[295,"HighlightGroup"],[297,"HighlightGroup"]],"tnSpan":[295,297],"tnText":""},"tag":"Create"}],[297,{"contents":{"tnHighlights":[[297,"HighlightGroup"]],"tnSpan":[297,297],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[293,{"contents":{"tnuHighlights":[[293,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[295,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef new_key(x:Nat) -> Key = hash(0, x)\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[295,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((x:Nat) -> Word64)"]},"tag":"Update"}],[296,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[297,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[20,{"contents":[{"rsbBlockId":20,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":43,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[21,{"contents":[{"rsbBlockId":21,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\"># TODO: use currying sugar (or even better, effects)\n</span></div>","rsbLexemeList":[],"rsbLine":44,"rsbNumLines":1,"rsbText":"# TODO: use currying sugar (or even better, effects)\n"},"Inert",[]],"tag":"Create"}],[22,{"contents":[{"rsbBlockId":22,"rsbHtml":"<div class=\"code-block\"><span id=\"span_22_299\">rejectionSamples</span><span> </span><span class=\"symbol\" id=\"span_22_300\">=</span><span> </span><span id=\"span_22_301\">rand_vec</span><span> </span><span id=\"span_22_303\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_22_306\">(</span><span class=\"symbol\" id=\"span_22_308\">\\</span><span id=\"span_22_309\">k</span><span class=\"symbol\" id=\"span_22_310\">.</span><span> </span><span id=\"span_22_311\">rejectionSample</span><span> </span><span class=\"symbol\" id=\"span_22_314\">(</span><span class=\"symbol\" id=\"span_22_316\">\\</span><span id=\"span_22_317\">k&#39;</span><span class=\"symbol\" id=\"span_22_318\">.</span><span> </span><span id=\"span_22_319\">trySampleBinomial</span><span> </span><span id=\"span_22_321\">n</span><span> </span><span id=\"span_22_323\">p</span><span> </span><span id=\"span_22_325\">k&#39;</span><span class=\"symbol\" id=\"span_22_326\">)</span><span> </span><span id=\"span_22_328\">k</span><span class=\"symbol\" id=\"span_22_329\">)</span><span> </span><span id=\"span_22_331\">k0</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[299,300,301,303,306,308,309,310,311,314,316,317,318,319,321,323,325,326,328,329,331],"rsbLine":45,"rsbNumLines":1,"rsbText":"rejectionSamples = rand_vec numSamples (\\k. rejectionSample (\\k'. trySampleBinomial n p k') k) k0\n"},"CompleteWithErrors",[{"contents":[[299,299],[300,298],[301,301],[303,303],[306,305],[308,307],[309,309],[310,307],[311,311],[314,313],[316,315],[317,317],[318,315],[319,319],[321,321],[323,323],[325,325],[326,313],[328,328],[329,305],[331,331]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[298,"HighlightGroup"]],"tnSpan":[299,331],"tnText":""},"tag":"Create"}],[298,{"contents":{"tnHighlights":[[300,"HighlightLeaf"],[299,"HighlightGroup"],[330,"HighlightGroup"]],"tnSpan":[299,331],"tnText":""},"tag":"Create"}],[299,{"contents":{"tnHighlights":[[299,"HighlightGroup"]],"tnSpan":[299,299],"tnText":""},"tag":"Create"}],[300,{"contents":{"tnHighlights":[[300,"HighlightGroup"]],"tnSpan":[300,300],"tnText":""},"tag":"Create"}],[301,{"contents":{"tnHighlights":[[301,"HighlightGroup"]],"tnSpan":[301,301],"tnText":""},"tag":"Create"}],[302,{"contents":{"tnHighlights":[[301,"HighlightGroup"],[303,"HighlightGroup"]],"tnSpan":[301,303],"tnText":""},"tag":"Create"}],[303,{"contents":{"tnHighlights":[[303,"HighlightGroup"]],"tnSpan":[303,303],"tnText":""},"tag":"Create"}],[304,{"contents":{"tnHighlights":[[302,"HighlightGroup"],[305,"HighlightGroup"]],"tnSpan":[301,329],"tnText":""},"tag":"Create"}],[305,{"contents":{"tnHighlights":[[306,"HighlightLeaf"],[329,"HighlightLeaf"],[307,"HighlightGroup"]],"tnSpan":[306,329],"tnText":""},"tag":"Create"}],[306,{"contents":{"tnHighlights":[[306,"HighlightGroup"]],"tnSpan":[306,306],"tnText":""},"tag":"Create"}],[307,{"contents":{"tnHighlights":[[308,"HighlightLeaf"],[310,"HighlightLeaf"],[309,"HighlightGroup"],[327,"HighlightGroup"]],"tnSpan":[308,328],"tnText":""},"tag":"Create"}],[308,{"contents":{"tnHighlights":[[308,"HighlightGroup"]],"tnSpan":[308,308],"tnText":""},"tag":"Create"}],[309,{"contents":{"tnHighlights":[[309,"HighlightGroup"]],"tnSpan":[309,309],"tnText":""},"tag":"Create"}],[310,{"contents":{"tnHighlights":[[310,"HighlightGroup"]],"tnSpan":[310,310],"tnText":""},"tag":"Create"}],[311,{"contents":{"tnHighlights":[[311,"HighlightGroup"]],"tnSpan":[311,311],"tnText":""},"tag":"Create"}],[312,{"contents":{"tnHighlights":[[311,"HighlightGroup"],[313,"HighlightGroup"]],"tnSpan":[311,326],"tnText":""},"tag":"Create"}],[313,{"contents":{"tnHighlights":[[314,"HighlightLeaf"],[326,"HighlightLeaf"],[315,"HighlightGroup"]],"tnSpan":[314,326],"tnText":""},"tag":"Create"}],[314,{"contents":{"tnHighlights":[[314,"HighlightGroup"]],"tnSpan":[314,314],"tnText":""},"tag":"Create"}],[315,{"contents":{"tnHighlights":[[316,"HighlightLeaf"],[318,"HighlightLeaf"],[317,"HighlightGroup"],[324,"HighlightGroup"]],"tnSpan":[316,325],"tnText":""},"tag":"Create"}],[316,{"contents":{"tnHighlights":[[316,"HighlightGroup"]],"tnSpan":[316,316],"tnText":""},"tag":"Create"}],[317,{"contents":{"tnHighlights":[[317,"HighlightGroup"]],"tnSpan":[317,317],"tnText":""},"tag":"Create"}],[318,{"contents":{"tnHighlights":[[318,"HighlightGroup"]],"tnSpan":[318,318],"tnText":""},"tag":"Create"}],[319,{"contents":{"tnHighlights":[[319,"HighlightGroup"]],"tnSpan":[319,319],"tnText":""},"tag":"Create"}],[320,{"contents":{"tnHighlights":[[319,"HighlightGroup"],[321,"HighlightGroup"]],"tnSpan":[319,321],"tnText":""},"tag":"Create"}],[321,{"contents":{"tnHighlights":[[321,"HighlightGroup"]],"tnSpan":[321,321],"tnText":""},"tag":"Create"}],[322,{"contents":{"tnHighlights":[[320,"HighlightGroup"],[323,"HighlightGroup"]],"tnSpan":[319,323],"tnText":""},"tag":"Create"}],[323,{"contents":{"tnHighlights":[[323,"HighlightGroup"]],"tnSpan":[323,323],"tnText":""},"tag":"Create"}],[324,{"contents":{"tnHighlights":[[322,"HighlightGroup"],[325,"HighlightGroup"]],"tnSpan":[319,325],"tnText":""},"tag":"Create"}],[325,{"contents":{"tnHighlights":[[325,"HighlightGroup"]],"tnSpan":[325,325],"tnText":""},"tag":"Create"}],[326,{"contents":{"tnHighlights":[[326,"HighlightGroup"]],"tnSpan":[326,326],"tnText":""},"tag":"Create"}],[327,{"contents":{"tnHighlights":[[312,"HighlightGroup"],[328,"HighlightGroup"]],"tnSpan":[311,328],"tnText":""},"tag":"Create"}],[328,{"contents":{"tnHighlights":[[328,"HighlightGroup"]],"tnSpan":[328,328],"tnText":""},"tag":"Create"}],[329,{"contents":{"tnHighlights":[[329,"HighlightGroup"]],"tnSpan":[329,329],"tnText":""},"tag":"Create"}],[330,{"contents":{"tnHighlights":[[304,"HighlightGroup"],[331,"HighlightGroup"]],"tnSpan":[301,331],"tnText":""},"tag":"Create"}],[331,{"contents":{"tnHighlights":[[331,"HighlightGroup"]],"tnSpan":[331,331],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[301,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand_vec(n:Nat, f: (Key) -> a, k: Key) -> Fin n => a  given (a:Type) =\n  for i:(Fin n). f ixkey(k, i)\n"]},"tag":"Update"}],[303,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nnumSamples = 5000\n"]},"tag":"Update"}],[309,{"contents":{"tnuHighlights":[[309,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[311,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef rejectionSample(try: (Key) -> Maybe a, k:Key) -> a  given (a|Data) =\n  iter \\i. case try $ hash k i of\n    Nothing -> Continue\n    Just x  -> Done x\n"]},"tag":"Update"}],[317,{"contents":{"tnuHighlights":[[317,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[319,"Name error: error in (earlier) definition of variable: trySampleBinomial"],"tag":"RenderedError"}]],"tag":"Create"}],[23,{"contents":[{"rsbBlockId":23,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":46,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[24,{"contents":[{"rsbBlockId":24,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_24_332\">p</span><span> </span><span id=\"span_24_333\">slice</span><span> </span><span id=\"span_24_335\">rejectionSamples</span><span> </span><span class=\"literal\" id=\"span_24_337\">0</span><span> </span><span class=\"symbol\" id=\"span_24_338\">$</span><span> </span><span id=\"span_24_340\">Fin</span><span> </span><span class=\"literal\" id=\"span_24_342\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[332,333,335,337,338,340,342],"rsbLine":47,"rsbNumLines":1,"rsbText":":p slice rejectionSamples 0 $ Fin 10\n"},"CompleteWithErrors",[{"contents":[[333,333],[335,335],[337,337],[338,339],[340,340],[342,342]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[339,"HighlightGroup"]],"tnSpan":[333,342],"tnText":""},"tag":"Create"}],[333,{"contents":{"tnHighlights":[[333,"HighlightGroup"]],"tnSpan":[333,333],"tnText":""},"tag":"Create"}],[334,{"contents":{"tnHighlights":[[333,"HighlightGroup"],[335,"HighlightGroup"]],"tnSpan":[333,335],"tnText":""},"tag":"Create"}],[335,{"contents":{"tnHighlights":[[335,"HighlightGroup"]],"tnSpan":[335,335],"tnText":""},"tag":"Create"}],[336,{"contents":{"tnHighlights":[[334,"HighlightGroup"],[337,"HighlightGroup"]],"tnSpan":[333,337],"tnText":""},"tag":"Create"}],[337,{"contents":{"tnHighlights":[[337,"HighlightGroup"]],"tnSpan":[337,337],"tnText":""},"tag":"Create"}],[338,{"contents":{"tnHighlights":[[338,"HighlightGroup"]],"tnSpan":[338,338],"tnText":""},"tag":"Create"}],[339,{"contents":{"tnHighlights":[[338,"HighlightLeaf"],[336,"HighlightGroup"],[341,"HighlightGroup"]],"tnSpan":[333,342],"tnText":""},"tag":"Create"}],[340,{"contents":{"tnHighlights":[[340,"HighlightGroup"]],"tnSpan":[340,340],"tnText":""},"tag":"Create"}],[341,{"contents":{"tnHighlights":[[340,"HighlightGroup"],[342,"HighlightGroup"]],"tnSpan":[340,342],"tnText":""},"tag":"Create"}],[342,{"contents":{"tnHighlights":[[342,"HighlightGroup"]],"tnSpan":[342,342],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[333,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef slice(xs:n=>a, start:Nat, m|Ix) -> m=>a given (n|Ix, a:Type) =\n  for i. xs[from_ordinal (ordinal i + start)]\n"]},"tag":"Update"}],[339,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[335,"Name error: error in (earlier) definition of variable: rejectionSamples"],"tag":"RenderedError"}]],"tag":"Create"}],[25,{"contents":[{"rsbBlockId":25,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":49,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[26,{"contents":[{"rsbBlockId":26,"rsbHtml":"<div class=\"prose-block\"><p>The Binomial distribution has mean 4 and variance 2.4.</p>\n</div>","rsbLexemeList":[],"rsbLine":50,"rsbNumLines":2,"rsbText":"'The Binomial distribution has mean 4 and variance 2.4.\n\n"},"Inert",[]],"tag":"Create"}],[27,{"contents":[{"rsbBlockId":27,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_27_344\">def</span><span> </span><span id=\"span_27_345\">meanAndVariance</span><span class=\"symbol\" id=\"span_27_347\">(</span><span id=\"span_27_348\">xs</span><span class=\"symbol\" id=\"span_27_349\">:</span><span id=\"span_27_351\">n</span><span class=\"symbol\" id=\"span_27_352\">=&gt;</span><span id=\"span_27_354\">Float</span><span class=\"symbol\" id=\"span_27_355\">)</span><span> </span><span class=\"symbol\" id=\"span_27_356\">-&gt;</span><span> </span><span class=\"symbol\" id=\"span_27_358\">(</span><span id=\"span_27_359\">Float</span><span class=\"symbol\" id=\"span_27_360\">,</span><span> </span><span id=\"span_27_361\">Float</span><span class=\"symbol\" id=\"span_27_362\">)</span><span> </span><span class=\"keyword\" id=\"span_27_363\">given</span><span> </span><span class=\"symbol\" id=\"span_27_365\">(</span><span id=\"span_27_366\">n</span><span class=\"symbol\" id=\"span_27_367\">|</span><span id=\"span_27_369\">Ix</span><span class=\"symbol\" id=\"span_27_370\">)</span><span> </span><span class=\"symbol\" id=\"span_27_371\">=</span><span> </span><span class=\"symbol\" id=\"span_27_373\">(</span><span id=\"span_27_374\">mean</span><span> </span><span id=\"span_27_376\">xs</span><span class=\"symbol\" id=\"span_27_377\">,</span><span> </span><span id=\"span_27_378\">sq</span><span> </span><span class=\"symbol\" id=\"span_27_379\">$</span><span> </span><span id=\"span_27_381\">std</span><span> </span><span id=\"span_27_383\">xs</span><span class=\"symbol\" id=\"span_27_384\">)</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[344,345,347,348,349,351,352,354,355,356,358,359,360,361,362,363,365,366,367,369,370,371,373,374,376,377,378,379,381,383,384],"rsbLine":52,"rsbNumLines":1,"rsbText":"def meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"},"Complete",[{"contents":[[344,343],[345,345],[347,346],[348,348],[349,350],[351,351],[352,353],[354,354],[355,346],[356,343],[358,357],[359,359],[360,357],[361,361],[362,357],[363,343],[365,364],[366,366],[367,368],[369,369],[370,364],[371,343],[373,372],[374,374],[376,376],[377,372],[378,378],[379,380],[381,381],[383,383],[384,372]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[343,"HighlightGroup"]],"tnSpan":[344,384],"tnText":""},"tag":"Create"}],[343,{"contents":{"tnHighlights":[[344,"HighlightLeaf"],[356,"HighlightLeaf"],[363,"HighlightLeaf"],[371,"HighlightLeaf"],[345,"HighlightGroup"],[346,"HighlightGroup"],[357,"HighlightGroup"],[364,"HighlightGroup"],[372,"HighlightGroup"]],"tnSpan":[344,384],"tnText":""},"tag":"Create"}],[344,{"contents":{"tnHighlights":[[344,"HighlightGroup"]],"tnSpan":[344,344],"tnText":""},"tag":"Create"}],[345,{"contents":{"tnHighlights":[[345,"HighlightGroup"]],"tnSpan":[345,345],"tnText":""},"tag":"Create"}],[346,{"contents":{"tnHighlights":[[347,"HighlightLeaf"],[355,"HighlightLeaf"],[350,"HighlightGroup"]],"tnSpan":[347,355],"tnText":""},"tag":"Create"}],[347,{"contents":{"tnHighlights":[[347,"HighlightGroup"]],"tnSpan":[347,347],"tnText":""},"tag":"Create"}],[348,{"contents":{"tnHighlights":[[348,"HighlightGroup"]],"tnSpan":[348,348],"tnText":""},"tag":"Create"}],[349,{"contents":{"tnHighlights":[[349,"HighlightGroup"]],"tnSpan":[349,349],"tnText":""},"tag":"Create"}],[350,{"contents":{"tnHighlights":[[349,"HighlightLeaf"],[348,"HighlightGroup"],[353,"HighlightGroup"]],"tnSpan":[348,354],"tnText":""},"tag":"Create"}],[351,{"contents":{"tnHighlights":[[351,"HighlightGroup"]],"tnSpan":[351,351],"tnText":""},"tag":"Create"}],[352,{"contents":{"tnHighlights":[[352,"HighlightGroup"]],"tnSpan":[352,352],"tnText":""},"tag":"Create"}],[353,{"contents":{"tnHighlights":[[352,"HighlightLeaf"],[351,"HighlightGroup"],[354,"HighlightGroup"]],"tnSpan":[351,354],"tnText":""},"tag":"Create"}],[354,{"contents":{"tnHighlights":[[354,"HighlightGroup"]],"tnSpan":[354,354],"tnText":""},"tag":"Create"}],[355,{"contents":{"tnHighlights":[[355,"HighlightGroup"]],"tnSpan":[355,355],"tnText":""},"tag":"Create"}],[356,{"contents":{"tnHighlights":[[356,"HighlightGroup"]],"tnSpan":[356,356],"tnText":""},"tag":"Create"}],[357,{"contents":{"tnHighlights":[[358,"HighlightLeaf"],[360,"HighlightLeaf"],[362,"HighlightLeaf"],[359,"HighlightGroup"],[361,"HighlightGroup"]],"tnSpan":[358,362],"tnText":""},"tag":"Create"}],[358,{"contents":{"tnHighlights":[[358,"HighlightGroup"]],"tnSpan":[358,358],"tnText":""},"tag":"Create"}],[359,{"contents":{"tnHighlights":[[359,"HighlightGroup"]],"tnSpan":[359,359],"tnText":""},"tag":"Create"}],[360,{"contents":{"tnHighlights":[[360,"HighlightGroup"]],"tnSpan":[360,360],"tnText":""},"tag":"Create"}],[361,{"contents":{"tnHighlights":[[361,"HighlightGroup"]],"tnSpan":[361,361],"tnText":""},"tag":"Create"}],[362,{"contents":{"tnHighlights":[[362,"HighlightGroup"]],"tnSpan":[362,362],"tnText":""},"tag":"Create"}],[363,{"contents":{"tnHighlights":[[363,"HighlightGroup"]],"tnSpan":[363,363],"tnText":""},"tag":"Create"}],[364,{"contents":{"tnHighlights":[[365,"HighlightLeaf"],[370,"HighlightLeaf"],[368,"HighlightGroup"]],"tnSpan":[365,370],"tnText":""},"tag":"Create"}],[365,{"contents":{"tnHighlights":[[365,"HighlightGroup"]],"tnSpan":[365,365],"tnText":""},"tag":"Create"}],[366,{"contents":{"tnHighlights":[[366,"HighlightGroup"]],"tnSpan":[366,366],"tnText":""},"tag":"Create"}],[367,{"contents":{"tnHighlights":[[367,"HighlightGroup"]],"tnSpan":[367,367],"tnText":""},"tag":"Create"}],[368,{"contents":{"tnHighlights":[[367,"HighlightLeaf"],[366,"HighlightGroup"],[369,"HighlightGroup"]],"tnSpan":[366,369],"tnText":""},"tag":"Create"}],[369,{"contents":{"tnHighlights":[[369,"HighlightGroup"]],"tnSpan":[369,369],"tnText":""},"tag":"Create"}],[370,{"contents":{"tnHighlights":[[370,"HighlightGroup"]],"tnSpan":[370,370],"tnText":""},"tag":"Create"}],[371,{"contents":{"tnHighlights":[[371,"HighlightGroup"]],"tnSpan":[371,371],"tnText":""},"tag":"Create"}],[372,{"contents":{"tnHighlights":[[373,"HighlightLeaf"],[377,"HighlightLeaf"],[384,"HighlightLeaf"],[375,"HighlightGroup"],[380,"HighlightGroup"]],"tnSpan":[373,384],"tnText":""},"tag":"Create"}],[373,{"contents":{"tnHighlights":[[373,"HighlightGroup"]],"tnSpan":[373,373],"tnText":""},"tag":"Create"}],[374,{"contents":{"tnHighlights":[[374,"HighlightGroup"]],"tnSpan":[374,374],"tnText":""},"tag":"Create"}],[375,{"contents":{"tnHighlights":[[374,"HighlightGroup"],[376,"HighlightGroup"]],"tnSpan":[374,376],"tnText":""},"tag":"Create"}],[376,{"contents":{"tnHighlights":[[376,"HighlightGroup"]],"tnSpan":[376,376],"tnText":""},"tag":"Create"}],[377,{"contents":{"tnHighlights":[[377,"HighlightGroup"]],"tnSpan":[377,377],"tnText":""},"tag":"Create"}],[378,{"contents":{"tnHighlights":[[378,"HighlightGroup"]],"tnSpan":[378,378],"tnText":""},"tag":"Create"}],[379,{"contents":{"tnHighlights":[[379,"HighlightGroup"]],"tnSpan":[379,379],"tnText":""},"tag":"Create"}],[380,{"contents":{"tnHighlights":[[379,"HighlightLeaf"],[378,"HighlightGroup"],[382,"HighlightGroup"]],"tnSpan":[378,383],"tnText":""},"tag":"Create"}],[381,{"contents":{"tnHighlights":[[381,"HighlightGroup"]],"tnSpan":[381,381],"tnText":""},"tag":"Create"}],[382,{"contents":{"tnHighlights":[[381,"HighlightGroup"],[383,"HighlightGroup"]],"tnSpan":[381,383],"tnText":""},"tag":"Create"}],[383,{"contents":{"tnHighlights":[[383,"HighlightGroup"]],"tnSpan":[383,383],"tnText":""},"tag":"Create"}],[384,{"contents":{"tnHighlights":[[384,"HighlightGroup"]],"tnSpan":[384,384],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[345,{"contents":{"tnuHighlights":[[345,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[[348,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[351,{"contents":{"tnuHighlights":[[366,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[[351,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[354,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}],[359,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}],[361,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nFloat = Float32\n"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[[366,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[[366,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[369,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[374,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef mean(xs:n=>v) -> v given (n|Ix, v|VSpace) = sum xs / n_to_f (size n)\n"]},"tag":"Update"}],[376,{"contents":{"tnuHighlights":[[348,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[[376,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[378,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef sq(x:a) -> a given (a|Mul) = x * x\n"]},"tag":"Update"}],[381,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef std(xs:n=>v) -> v given (n|Ix, v|Mul|Sub|VSpace|Floating) = sqrt $ mean (each xs sq) - sq (mean xs)\n"]},"tag":"Update"}],[383,{"contents":{"tnuHighlights":[[348,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[[383,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[343,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n.1:Type}[v#0:(Ix n.1)](xs:(n.1 => Float32)) -> (Float32, Float32))"]},"tag":"Update"}],[348,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (n.1 => Float32)"]},"tag":"Update"}],[351,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[353,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[354,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[357,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[359,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[361,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[366,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[369,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[372,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Float32, Float32)"]},"tag":"Update"}],[374,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)]{v:Type}[v#1:(VSpace v)](xs:(n => v)) -> v)"]},"tag":"Update"}],[375,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[376,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (n.1 => Float32)"]},"tag":"Update"}],[378,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Mul a)](x:a) -> a)"]},"tag":"Update"}],[380,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[381,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)]{v:Type}[v#1:(Mul v),v#2:(Sub v),v#3:(VSpace v),v#4:(Floating v)](xs:(n\n                                                                                           => v)) -> v)"]},"tag":"Update"}],[382,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[383,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (n.1 => Float32)"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[28,{"contents":[{"rsbBlockId":28,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":53,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[29,{"contents":[{"rsbBlockId":29,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_29_385\">p</span><span> </span><span id=\"span_29_386\">meanAndVariance</span><span> </span><span class=\"symbol\" id=\"span_29_387\">$</span><span> </span><span id=\"span_29_389\">map</span><span> </span><span id=\"span_29_391\">n_to_f</span><span> </span><span id=\"span_29_393\">rejectionSamples</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[385,386,387,389,391,393],"rsbLine":54,"rsbNumLines":1,"rsbText":":p meanAndVariance $ map n_to_f rejectionSamples\n"},"CompleteWithErrors",[{"contents":[[386,386],[387,388],[389,389],[391,391],[393,393]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[388,"HighlightGroup"]],"tnSpan":[386,393],"tnText":""},"tag":"Create"}],[386,{"contents":{"tnHighlights":[[386,"HighlightGroup"]],"tnSpan":[386,386],"tnText":""},"tag":"Create"}],[387,{"contents":{"tnHighlights":[[387,"HighlightGroup"]],"tnSpan":[387,387],"tnText":""},"tag":"Create"}],[388,{"contents":{"tnHighlights":[[387,"HighlightLeaf"],[386,"HighlightGroup"],[392,"HighlightGroup"]],"tnSpan":[386,393],"tnText":""},"tag":"Create"}],[389,{"contents":{"tnHighlights":[[389,"HighlightGroup"]],"tnSpan":[389,389],"tnText":""},"tag":"Create"}],[390,{"contents":{"tnHighlights":[[389,"HighlightGroup"],[391,"HighlightGroup"]],"tnSpan":[389,391],"tnText":""},"tag":"Create"}],[391,{"contents":{"tnHighlights":[[391,"HighlightGroup"]],"tnSpan":[391,391],"tnText":""},"tag":"Create"}],[392,{"contents":{"tnHighlights":[[390,"HighlightGroup"],[393,"HighlightGroup"]],"tnSpan":[389,393],"tnText":""},"tag":"Create"}],[393,{"contents":{"tnHighlights":[[393,"HighlightGroup"]],"tnSpan":[393,393],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[386,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"]},"tag":"Update"}],[388,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[389,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}],[30,{"contents":[{"rsbBlockId":30,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":56,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[31,{"contents":[{"rsbBlockId":31,"rsbHtml":"<div class=\"prose-block\"><h2>Alternative: Inversion sampling</h2>\n</div>","rsbLexemeList":[],"rsbLine":57,"rsbNumLines":2,"rsbText":"'## Alternative: Inversion sampling\n\n"},"Inert",[]],"tag":"Create"}],[32,{"contents":[{"rsbBlockId":32,"rsbHtml":"<div class=\"prose-block\"><p>Alternatively, we can use inversion sampling.</p>\n</div>","rsbLexemeList":[],"rsbLine":59,"rsbNumLines":2,"rsbText":"'Alternatively, we can use inversion sampling.\n\n"},"Inert",[]],"tag":"Create"}],[33,{"contents":[{"rsbBlockId":33,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_33_395\">def</span><span> </span><span id=\"span_33_396\">binomialSample</span><span class=\"symbol\" id=\"span_33_398\">(</span><span id=\"span_33_399\">n</span><span class=\"symbol\" id=\"span_33_400\">:</span><span id=\"span_33_402\">Nat</span><span class=\"symbol\" id=\"span_33_403\">,</span><span> </span><span id=\"span_33_404\">p</span><span class=\"symbol\" id=\"span_33_405\">:</span><span id=\"span_33_407\">Prob</span><span class=\"symbol\" id=\"span_33_408\">,</span><span> </span><span id=\"span_33_409\">k</span><span class=\"symbol\" id=\"span_33_410\">:</span><span id=\"span_33_412\">Key</span><span class=\"symbol\" id=\"span_33_413\">)</span><span> </span><span class=\"symbol\" id=\"span_33_414\">-&gt;</span><span> </span><span id=\"span_33_415\">Nat</span><span> </span><span class=\"symbol\" id=\"span_33_416\">=</span><span class=\"comment\">\n  </span><span id=\"span_33_419\">m</span><span> </span><span class=\"symbol\" id=\"span_33_420\">=</span><span> </span><span id=\"span_33_421\">n</span><span> </span><span class=\"symbol\" id=\"span_33_422\">+</span><span> </span><span class=\"literal\" id=\"span_33_424\">1</span><span class=\"comment\">\n  </span><span id=\"span_33_426\">logprobs</span><span> </span><span class=\"symbol\" id=\"span_33_427\">=</span><span> </span><span class=\"keyword\" id=\"span_33_429\">for</span><span> </span><span id=\"span_33_430\">i</span><span class=\"symbol\" id=\"span_33_431\">:</span><span class=\"symbol\" id=\"span_33_434\">(</span><span id=\"span_33_435\">Fin</span><span> </span><span id=\"span_33_437\">m</span><span class=\"symbol\" id=\"span_33_438\">)</span><span class=\"symbol\" id=\"span_33_439\">.</span><span> </span><span id=\"span_33_440\">logBinomialProb</span><span> </span><span id=\"span_33_442\">n</span><span> </span><span id=\"span_33_444\">p</span><span> </span><span class=\"symbol\" id=\"span_33_445\">$</span><span> </span><span id=\"span_33_447\">ordinal</span><span> </span><span id=\"span_33_449\">i</span><span class=\"comment\">\n  </span><span id=\"span_33_451\">ordinal</span><span> </span><span class=\"symbol\" id=\"span_33_452\">$</span><span> </span><span id=\"span_33_454\">categorical</span><span> </span><span id=\"span_33_456\">logprobs</span><span> </span><span id=\"span_33_458\">k</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[395,396,398,399,400,402,403,404,405,407,408,409,410,412,413,414,415,416,419,420,421,422,424,426,427,429,430,431,434,435,437,438,439,440,442,444,445,447,449,451,452,454,456,458],"rsbLine":61,"rsbNumLines":4,"rsbText":"def binomialSample(n:Nat, p:Prob, k:Key) -> Nat =\n  m = n + 1\n  logprobs = for i:(Fin m). logBinomialProb n p $ ordinal i\n  ordinal $ categorical logprobs k\n"},"Complete",[{"contents":[[395,394],[396,396],[398,397],[399,399],[400,401],[402,402],[403,397],[404,404],[405,406],[407,407],[408,397],[409,409],[410,411],[412,412],[413,397],[414,394],[415,415],[416,394],[419,419],[420,418],[421,421],[422,422],[424,424],[426,426],[427,425],[429,428],[430,430],[431,432],[434,433],[435,435],[437,437],[438,433],[439,428],[440,440],[442,442],[444,444],[445,446],[447,447],[449,449],[451,451],[452,453],[454,454],[456,456],[458,458]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[394,"HighlightGroup"]],"tnSpan":[395,458],"tnText":""},"tag":"Create"}],[394,{"contents":{"tnHighlights":[[395,"HighlightLeaf"],[414,"HighlightLeaf"],[416,"HighlightLeaf"],[396,"HighlightGroup"],[397,"HighlightGroup"],[415,"HighlightGroup"],[417,"HighlightGroup"]],"tnSpan":[395,458],"tnText":""},"tag":"Create"}],[395,{"contents":{"tnHighlights":[[395,"HighlightGroup"]],"tnSpan":[395,395],"tnText":""},"tag":"Create"}],[396,{"contents":{"tnHighlights":[[396,"HighlightGroup"]],"tnSpan":[396,396],"tnText":""},"tag":"Create"}],[397,{"contents":{"tnHighlights":[[398,"HighlightLeaf"],[403,"HighlightLeaf"],[408,"HighlightLeaf"],[413,"HighlightLeaf"],[401,"HighlightGroup"],[406,"HighlightGroup"],[411,"HighlightGroup"]],"tnSpan":[398,413],"tnText":""},"tag":"Create"}],[398,{"contents":{"tnHighlights":[[398,"HighlightGroup"]],"tnSpan":[398,398],"tnText":""},"tag":"Create"}],[399,{"contents":{"tnHighlights":[[399,"HighlightGroup"]],"tnSpan":[399,399],"tnText":""},"tag":"Create"}],[400,{"contents":{"tnHighlights":[[400,"HighlightGroup"]],"tnSpan":[400,400],"tnText":""},"tag":"Create"}],[401,{"contents":{"tnHighlights":[[400,"HighlightLeaf"],[399,"HighlightGroup"],[402,"HighlightGroup"]],"tnSpan":[399,402],"tnText":""},"tag":"Create"}],[402,{"contents":{"tnHighlights":[[402,"HighlightGroup"]],"tnSpan":[402,402],"tnText":""},"tag":"Create"}],[403,{"contents":{"tnHighlights":[[403,"HighlightGroup"]],"tnSpan":[403,403],"tnText":""},"tag":"Create"}],[404,{"contents":{"tnHighlights":[[404,"HighlightGroup"]],"tnSpan":[404,404],"tnText":""},"tag":"Create"}],[405,{"contents":{"tnHighlights":[[405,"HighlightGroup"]],"tnSpan":[405,405],"tnText":""},"tag":"Create"}],[406,{"contents":{"tnHighlights":[[405,"HighlightLeaf"],[404,"HighlightGroup"],[407,"HighlightGroup"]],"tnSpan":[404,407],"tnText":""},"tag":"Create"}],[407,{"contents":{"tnHighlights":[[407,"HighlightGroup"]],"tnSpan":[407,407],"tnText":""},"tag":"Create"}],[408,{"contents":{"tnHighlights":[[408,"HighlightGroup"]],"tnSpan":[408,408],"tnText":""},"tag":"Create"}],[409,{"contents":{"tnHighlights":[[409,"HighlightGroup"]],"tnSpan":[409,409],"tnText":""},"tag":"Create"}],[410,{"contents":{"tnHighlights":[[410,"HighlightGroup"]],"tnSpan":[410,410],"tnText":""},"tag":"Create"}],[411,{"contents":{"tnHighlights":[[410,"HighlightLeaf"],[409,"HighlightGroup"],[412,"HighlightGroup"]],"tnSpan":[409,412],"tnText":""},"tag":"Create"}],[412,{"contents":{"tnHighlights":[[412,"HighlightGroup"]],"tnSpan":[412,412],"tnText":""},"tag":"Create"}],[413,{"contents":{"tnHighlights":[[413,"HighlightGroup"]],"tnSpan":[413,413],"tnText":""},"tag":"Create"}],[414,{"contents":{"tnHighlights":[[414,"HighlightGroup"]],"tnSpan":[414,414],"tnText":""},"tag":"Create"}],[415,{"contents":{"tnHighlights":[[415,"HighlightGroup"]],"tnSpan":[415,415],"tnText":""},"tag":"Create"}],[416,{"contents":{"tnHighlights":[[416,"HighlightGroup"]],"tnSpan":[416,416],"tnText":""},"tag":"Create"}],[417,{"contents":{"tnHighlights":[[418,"HighlightGroup"],[425,"HighlightGroup"],[450,"HighlightGroup"]],"tnSpan":[419,458],"tnText":""},"tag":"Create"}],[418,{"contents":{"tnHighlights":[[420,"HighlightLeaf"],[419,"HighlightGroup"],[423,"HighlightGroup"]],"tnSpan":[419,424],"tnText":""},"tag":"Create"}],[419,{"contents":{"tnHighlights":[[419,"HighlightGroup"]],"tnSpan":[419,419],"tnText":""},"tag":"Create"}],[420,{"contents":{"tnHighlights":[[420,"HighlightGroup"]],"tnSpan":[420,420],"tnText":""},"tag":"Create"}],[421,{"contents":{"tnHighlights":[[421,"HighlightGroup"]],"tnSpan":[421,421],"tnText":""},"tag":"Create"}],[422,{"contents":{"tnHighlights":[[422,"HighlightGroup"]],"tnSpan":[422,422],"tnText":""},"tag":"Create"}],[423,{"contents":{"tnHighlights":[[421,"HighlightGroup"],[422,"HighlightGroup"],[424,"HighlightGroup"]],"tnSpan":[421,424],"tnText":""},"tag":"Create"}],[424,{"contents":{"tnHighlights":[[424,"HighlightGroup"]],"tnSpan":[424,424],"tnText":""},"tag":"Create"}],[425,{"contents":{"tnHighlights":[[427,"HighlightLeaf"],[426,"HighlightGroup"],[428,"HighlightGroup"]],"tnSpan":[426,449],"tnText":""},"tag":"Create"}],[426,{"contents":{"tnHighlights":[[426,"HighlightGroup"]],"tnSpan":[426,426],"tnText":""},"tag":"Create"}],[427,{"contents":{"tnHighlights":[[427,"HighlightGroup"]],"tnSpan":[427,427],"tnText":""},"tag":"Create"}],[428,{"contents":{"tnHighlights":[[429,"HighlightLeaf"],[439,"HighlightLeaf"],[432,"HighlightGroup"],[446,"HighlightGroup"]],"tnSpan":[429,449],"tnText":""},"tag":"Create"}],[429,{"contents":{"tnHighlights":[[429,"HighlightGroup"]],"tnSpan":[429,429],"tnText":""},"tag":"Create"}],[430,{"contents":{"tnHighlights":[[430,"HighlightGroup"]],"tnSpan":[430,430],"tnText":""},"tag":"Create"}],[431,{"contents":{"tnHighlights":[[431,"HighlightGroup"]],"tnSpan":[431,431],"tnText":""},"tag":"Create"}],[432,{"contents":{"tnHighlights":[[431,"HighlightLeaf"],[430,"HighlightGroup"],[433,"HighlightGroup"]],"tnSpan":[430,438],"tnText":""},"tag":"Create"}],[433,{"contents":{"tnHighlights":[[434,"HighlightLeaf"],[438,"HighlightLeaf"],[436,"HighlightGroup"]],"tnSpan":[434,438],"tnText":""},"tag":"Create"}],[434,{"contents":{"tnHighlights":[[434,"HighlightGroup"]],"tnSpan":[434,434],"tnText":""},"tag":"Create"}],[435,{"contents":{"tnHighlights":[[435,"HighlightGroup"]],"tnSpan":[435,435],"tnText":""},"tag":"Create"}],[436,{"contents":{"tnHighlights":[[435,"HighlightGroup"],[437,"HighlightGroup"]],"tnSpan":[435,437],"tnText":""},"tag":"Create"}],[437,{"contents":{"tnHighlights":[[437,"HighlightGroup"]],"tnSpan":[437,437],"tnText":""},"tag":"Create"}],[438,{"contents":{"tnHighlights":[[438,"HighlightGroup"]],"tnSpan":[438,438],"tnText":""},"tag":"Create"}],[439,{"contents":{"tnHighlights":[[439,"HighlightGroup"]],"tnSpan":[439,439],"tnText":""},"tag":"Create"}],[440,{"contents":{"tnHighlights":[[440,"HighlightGroup"]],"tnSpan":[440,440],"tnText":""},"tag":"Create"}],[441,{"contents":{"tnHighlights":[[440,"HighlightGroup"],[442,"HighlightGroup"]],"tnSpan":[440,442],"tnText":""},"tag":"Create"}],[442,{"contents":{"tnHighlights":[[442,"HighlightGroup"]],"tnSpan":[442,442],"tnText":""},"tag":"Create"}],[443,{"contents":{"tnHighlights":[[441,"HighlightGroup"],[444,"HighlightGroup"]],"tnSpan":[440,444],"tnText":""},"tag":"Create"}],[444,{"contents":{"tnHighlights":[[444,"HighlightGroup"]],"tnSpan":[444,444],"tnText":""},"tag":"Create"}],[445,{"contents":{"tnHighlights":[[445,"HighlightGroup"]],"tnSpan":[445,445],"tnText":""},"tag":"Create"}],[446,{"contents":{"tnHighlights":[[445,"HighlightLeaf"],[443,"HighlightGroup"],[448,"HighlightGroup"]],"tnSpan":[440,449],"tnText":""},"tag":"Create"}],[447,{"contents":{"tnHighlights":[[447,"HighlightGroup"]],"tnSpan":[447,447],"tnText":""},"tag":"Create"}],[448,{"contents":{"tnHighlights":[[447,"HighlightGroup"],[449,"HighlightGroup"]],"tnSpan":[447,449],"tnText":""},"tag":"Create"}],[449,{"contents":{"tnHighlights":[[449,"HighlightGroup"]],"tnSpan":[449,449],"tnText":""},"tag":"Create"}],[450,{"contents":{"tnHighlights":[[453,"HighlightGroup"]],"tnSpan":[451,458],"tnText":""},"tag":"Create"}],[451,{"contents":{"tnHighlights":[[451,"HighlightGroup"]],"tnSpan":[451,451],"tnText":""},"tag":"Create"}],[452,{"contents":{"tnHighlights":[[452,"HighlightGroup"]],"tnSpan":[452,452],"tnText":""},"tag":"Create"}],[453,{"contents":{"tnHighlights":[[452,"HighlightLeaf"],[451,"HighlightGroup"],[457,"HighlightGroup"]],"tnSpan":[451,458],"tnText":""},"tag":"Create"}],[454,{"contents":{"tnHighlights":[[454,"HighlightGroup"]],"tnSpan":[454,454],"tnText":""},"tag":"Create"}],[455,{"contents":{"tnHighlights":[[454,"HighlightGroup"],[456,"HighlightGroup"]],"tnSpan":[454,456],"tnText":""},"tag":"Create"}],[456,{"contents":{"tnHighlights":[[456,"HighlightGroup"]],"tnSpan":[456,456],"tnText":""},"tag":"Create"}],[457,{"contents":{"tnHighlights":[[455,"HighlightGroup"],[458,"HighlightGroup"]],"tnSpan":[454,458],"tnText":""},"tag":"Create"}],[458,{"contents":{"tnHighlights":[[458,"HighlightGroup"]],"tnSpan":[458,458],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[396,{"contents":{"tnuHighlights":[[396,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[[399,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[402,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[404,{"contents":{"tnuHighlights":[[404,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[407,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[409,{"contents":{"tnuHighlights":[[409,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[412,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[415,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[419,{"contents":{"tnuHighlights":[[419,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[421,{"contents":{"tnuHighlights":[[399,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[[421,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[422,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[426,{"contents":{"tnuHighlights":[[426,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[430,{"contents":{"tnuHighlights":[[430,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[435,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef Fin(n:Nat) -> Type = %Fin(n)\n"]},"tag":"Update"}],[437,{"contents":{"tnuHighlights":[[419,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[419,{"contents":{"tnuHighlights":[[437,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[440,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"]},"tag":"Update"}],[442,{"contents":{"tnuHighlights":[[399,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[[442,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[444,{"contents":{"tnuHighlights":[[404,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[404,{"contents":{"tnuHighlights":[[444,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[447,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[449,{"contents":{"tnuHighlights":[[430,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[430,{"contents":{"tnuHighlights":[[449,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[451,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[454,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef categorical(logprobs: n=>Float, key: Key) -> n given (n|Ix) =\n  categorical_from_cdf(cdf_for_categorical logprobs, key)\n"]},"tag":"Update"}],[456,{"contents":{"tnuHighlights":[[426,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[426,{"contents":{"tnuHighlights":[[456,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[458,{"contents":{"tnuHighlights":[[409,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[409,{"contents":{"tnuHighlights":[[458,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[394,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n.1:Nat,p.1:Float32,k:Word64) -> Nat)"]},"tag":"Update"}],[399,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[402,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[404,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[407,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[409,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[412,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[415,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[419,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[421,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[422,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}[v#0:(Add a)](v#1:a,v#2:a) -> a)"]},"tag":"Update"}],[423,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[424,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[426,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin v#1) => Float32)"]},"tag":"Update"}],[428,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin v#1) => Float32)"]},"tag":"Update"}],[430,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Fin v#1)"]},"tag":"Update"}],[433,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[435,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n:Nat) -> Type)"]},"tag":"Update"}],[437,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[440,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n_:Nat,p:Float32,counts_:Nat) -> Float32)"]},"tag":"Update"}],[442,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[444,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[446,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[447,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n.2:Type}[v#2:(Ix n.2)](v#3:n.2) -> Nat)"]},"tag":"Update"}],[448,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[449,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Fin v#1)"]},"tag":"Update"}],[451,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n.2:Type}[v#3:(Ix n.2)](v#4:n.2) -> Nat)"]},"tag":"Update"}],[453,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[454,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)](logprob:(n => Float32),key:Word64) -> n)"]},"tag":"Update"}],[456,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin v#1) => Float32)"]},"tag":"Update"}],[457,{"contents":{"tnuHighlights":[],"tnuText":["Type:   (Fin v#1)"]},"tag":"Update"}],[458,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[34,{"contents":[{"rsbBlockId":34,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":65,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[35,{"contents":[{"rsbBlockId":35,"rsbHtml":"<div class=\"code-block\"><span id=\"span_35_460\">inversionSamples</span><span> </span><span class=\"symbol\" id=\"span_35_461\">=</span><span> </span><span id=\"span_35_462\">rand_vec</span><span> </span><span id=\"span_35_464\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_35_467\">(</span><span class=\"symbol\" id=\"span_35_469\">\\</span><span id=\"span_35_470\">k</span><span class=\"symbol\" id=\"span_35_471\">.</span><span> </span><span id=\"span_35_472\">binomialSample</span><span> </span><span id=\"span_35_474\">n</span><span> </span><span id=\"span_35_476\">p</span><span> </span><span id=\"span_35_478\">k</span><span class=\"symbol\" id=\"span_35_479\">)</span><span> </span><span id=\"span_35_481\">k0</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[460,461,462,464,467,469,470,471,472,474,476,478,479,481],"rsbLine":66,"rsbNumLines":1,"rsbText":"inversionSamples = rand_vec numSamples (\\k. binomialSample n p k) k0\n"},"Complete",[{"contents":[[460,460],[461,459],[462,462],[464,464],[467,466],[469,468],[470,470],[471,468],[472,472],[474,474],[476,476],[478,478],[479,466],[481,481]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[459,"HighlightGroup"]],"tnSpan":[460,481],"tnText":""},"tag":"Create"}],[459,{"contents":{"tnHighlights":[[461,"HighlightLeaf"],[460,"HighlightGroup"],[480,"HighlightGroup"]],"tnSpan":[460,481],"tnText":""},"tag":"Create"}],[460,{"contents":{"tnHighlights":[[460,"HighlightGroup"]],"tnSpan":[460,460],"tnText":""},"tag":"Create"}],[461,{"contents":{"tnHighlights":[[461,"HighlightGroup"]],"tnSpan":[461,461],"tnText":""},"tag":"Create"}],[462,{"contents":{"tnHighlights":[[462,"HighlightGroup"]],"tnSpan":[462,462],"tnText":""},"tag":"Create"}],[463,{"contents":{"tnHighlights":[[462,"HighlightGroup"],[464,"HighlightGroup"]],"tnSpan":[462,464],"tnText":""},"tag":"Create"}],[464,{"contents":{"tnHighlights":[[464,"HighlightGroup"]],"tnSpan":[464,464],"tnText":""},"tag":"Create"}],[465,{"contents":{"tnHighlights":[[463,"HighlightGroup"],[466,"HighlightGroup"]],"tnSpan":[462,479],"tnText":""},"tag":"Create"}],[466,{"contents":{"tnHighlights":[[467,"HighlightLeaf"],[479,"HighlightLeaf"],[468,"HighlightGroup"]],"tnSpan":[467,479],"tnText":""},"tag":"Create"}],[467,{"contents":{"tnHighlights":[[467,"HighlightGroup"]],"tnSpan":[467,467],"tnText":""},"tag":"Create"}],[468,{"contents":{"tnHighlights":[[469,"HighlightLeaf"],[471,"HighlightLeaf"],[470,"HighlightGroup"],[477,"HighlightGroup"]],"tnSpan":[469,478],"tnText":""},"tag":"Create"}],[469,{"contents":{"tnHighlights":[[469,"HighlightGroup"]],"tnSpan":[469,469],"tnText":""},"tag":"Create"}],[470,{"contents":{"tnHighlights":[[470,"HighlightGroup"]],"tnSpan":[470,470],"tnText":""},"tag":"Create"}],[471,{"contents":{"tnHighlights":[[471,"HighlightGroup"]],"tnSpan":[471,471],"tnText":""},"tag":"Create"}],[472,{"contents":{"tnHighlights":[[472,"HighlightGroup"]],"tnSpan":[472,472],"tnText":""},"tag":"Create"}],[473,{"contents":{"tnHighlights":[[472,"HighlightGroup"],[474,"HighlightGroup"]],"tnSpan":[472,474],"tnText":""},"tag":"Create"}],[474,{"contents":{"tnHighlights":[[474,"HighlightGroup"]],"tnSpan":[474,474],"tnText":""},"tag":"Create"}],[475,{"contents":{"tnHighlights":[[473,"HighlightGroup"],[476,"HighlightGroup"]],"tnSpan":[472,476],"tnText":""},"tag":"Create"}],[476,{"contents":{"tnHighlights":[[476,"HighlightGroup"]],"tnSpan":[476,476],"tnText":""},"tag":"Create"}],[477,{"contents":{"tnHighlights":[[475,"HighlightGroup"],[478,"HighlightGroup"]],"tnSpan":[472,478],"tnText":""},"tag":"Create"}],[478,{"contents":{"tnHighlights":[[478,"HighlightGroup"]],"tnSpan":[478,478],"tnText":""},"tag":"Create"}],[479,{"contents":{"tnHighlights":[[479,"HighlightGroup"]],"tnSpan":[479,479],"tnText":""},"tag":"Create"}],[480,{"contents":{"tnHighlights":[[465,"HighlightGroup"],[481,"HighlightGroup"]],"tnSpan":[462,481],"tnText":""},"tag":"Create"}],[481,{"contents":{"tnHighlights":[[481,"HighlightGroup"]],"tnSpan":[481,481],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[460,{"contents":{"tnuHighlights":[[460,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[462,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef rand_vec(n:Nat, f: (Key) -> a, k: Key) -> Fin n => a  given (a:Type) =\n  for i:(Fin n). f ixkey(k, i)\n"]},"tag":"Update"}],[464,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nnumSamples = 5000\n"]},"tag":"Update"}],[470,{"contents":{"tnuHighlights":[[470,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[472,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef binomialSample(n:Nat, p:Prob, k:Key) -> Nat =\n  m = n + 1\n  logprobs = for i:(Fin m). logBinomialProb n p $ ordinal i\n  ordinal $ categorical logprobs k\n"]},"tag":"Update"}],[474,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nn = 10\n"]},"tag":"Update"}],[476,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\np = 0.4\n"]},"tag":"Update"}],[478,{"contents":{"tnuHighlights":[[470,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[470,{"contents":{"tnuHighlights":[[478,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[481,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nk0 = new_key 0\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[462,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}(n:Nat,f:((v#0:Word64) -> a),k:Word64) -> ((Fin n) => a))"]},"tag":"Update"}],[464,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[470,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[472,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n.1:Nat,p.1:Float32,k:Word64) -> Nat)"]},"tag":"Update"}],[474,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[476,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Float32"]},"tag":"Update"}],[477,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[478,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}],[480,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin numSamp) => Nat)"]},"tag":"Update"}],[481,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Word64"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"}]],"tag":"Create"}],[36,{"contents":[{"rsbBlockId":36,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":67,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[37,{"contents":[{"rsbBlockId":37,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_37_482\">p</span><span> </span><span id=\"span_37_483\">slice</span><span> </span><span id=\"span_37_485\">inversionSamples</span><span> </span><span class=\"literal\" id=\"span_37_487\">0</span><span> </span><span class=\"symbol\" id=\"span_37_488\">$</span><span> </span><span id=\"span_37_490\">Fin</span><span> </span><span class=\"literal\" id=\"span_37_492\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[482,483,485,487,488,490,492],"rsbLine":68,"rsbNumLines":1,"rsbText":":p slice inversionSamples 0 $ Fin 10\n"},"Complete",[{"contents":[[483,483],[485,485],[487,487],[488,489],[490,490],[492,492]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[489,"HighlightGroup"]],"tnSpan":[483,492],"tnText":""},"tag":"Create"}],[483,{"contents":{"tnHighlights":[[483,"HighlightGroup"]],"tnSpan":[483,483],"tnText":""},"tag":"Create"}],[484,{"contents":{"tnHighlights":[[483,"HighlightGroup"],[485,"HighlightGroup"]],"tnSpan":[483,485],"tnText":""},"tag":"Create"}],[485,{"contents":{"tnHighlights":[[485,"HighlightGroup"]],"tnSpan":[485,485],"tnText":""},"tag":"Create"}],[486,{"contents":{"tnHighlights":[[484,"HighlightGroup"],[487,"HighlightGroup"]],"tnSpan":[483,487],"tnText":""},"tag":"Create"}],[487,{"contents":{"tnHighlights":[[487,"HighlightGroup"]],"tnSpan":[487,487],"tnText":""},"tag":"Create"}],[488,{"contents":{"tnHighlights":[[488,"HighlightGroup"]],"tnSpan":[488,488],"tnText":""},"tag":"Create"}],[489,{"contents":{"tnHighlights":[[488,"HighlightLeaf"],[486,"HighlightGroup"],[491,"HighlightGroup"]],"tnSpan":[483,492],"tnText":""},"tag":"Create"}],[490,{"contents":{"tnHighlights":[[490,"HighlightGroup"]],"tnSpan":[490,490],"tnText":""},"tag":"Create"}],[491,{"contents":{"tnHighlights":[[490,"HighlightGroup"],[492,"HighlightGroup"]],"tnSpan":[490,492],"tnText":""},"tag":"Create"}],[492,{"contents":{"tnHighlights":[[492,"HighlightGroup"]],"tnSpan":[492,492],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[483,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef slice(xs:n=>a, start:Nat, m|Ix) -> m=>a given (n|Ix, a:Type) =\n  for i. xs[from_ordinal (ordinal i + start)]\n"]},"tag":"Update"}],[485,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ninversionSamples = rand_vec numSamples (\\k. binomialSample n p k) k0\n"]},"tag":"Update"}],[489,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}],[490,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef Fin(n:Nat) -> Type = %Fin(n)\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["RenamePass",null],"tag":"RenderedPassResult"},{"contents":[[483,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({n:Type}[v#0:(Ix n)]{a:Type}(xs:(n => a),start:Nat,m:Type)[v#1:(Ix m)] -> (m\n                                                                            => a))"]},"tag":"Update"}],[485,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((Fin numSamp) => Nat)"]},"tag":"Update"}],[487,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}],[489,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ({a:Type}(x:a) -> (List Word8))"]},"tag":"Update"}],[490,{"contents":{"tnuHighlights":[],"tnuText":["Type:   ((n:Nat) -> Type)"]},"tag":"Update"}],[491,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Type"]},"tag":"Update"}],[492,{"contents":{"tnuHighlights":[],"tnuText":["Type:   Nat"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["TypePass",null],"tag":"RenderedPassResult"},{"contents":["SimpPass",null],"tag":"RenderedPassResult"},{"contents":["LowerPass",null],"tag":"RenderedPassResult"},{"contents":["OptPass",null],"tag":"RenderedPassResult"},{"contents":["ImpPass",null],"tag":"RenderedPassResult"},{"contents":["JitPass",null],"tag":"RenderedPassResult"},{"contents":["LLVMOpt",null],"tag":"RenderedPassResult"},{"contents":["AsmPass",null],"tag":"RenderedPassResult"},{"contents":"[6, 3, 3, 3, 4, 5, 1, 3, 3, 6]","tag":"RenderedTextOut"}]],"tag":"Create"}],[38,{"contents":[{"rsbBlockId":38,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":70,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[39,{"contents":[{"rsbBlockId":39,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_39_493\">p</span><span> </span><span id=\"span_39_494\">meanAndVariance</span><span> </span><span class=\"symbol\" id=\"span_39_495\">$</span><span> </span><span id=\"span_39_497\">map</span><span> </span><span id=\"span_39_499\">n_to_f</span><span> </span><span id=\"span_39_501\">inversionSamples</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[493,494,495,497,499,501],"rsbLine":71,"rsbNumLines":1,"rsbText":":p meanAndVariance $ map n_to_f inversionSamples\n"},"CompleteWithErrors",[{"contents":[[494,494],[495,496],[497,497],[499,499],[501,501]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[496,"HighlightGroup"]],"tnSpan":[494,501],"tnText":""},"tag":"Create"}],[494,{"contents":{"tnHighlights":[[494,"HighlightGroup"]],"tnSpan":[494,494],"tnText":""},"tag":"Create"}],[495,{"contents":{"tnHighlights":[[495,"HighlightGroup"]],"tnSpan":[495,495],"tnText":""},"tag":"Create"}],[496,{"contents":{"tnHighlights":[[495,"HighlightLeaf"],[494,"HighlightGroup"],[500,"HighlightGroup"]],"tnSpan":[494,501],"tnText":""},"tag":"Create"}],[497,{"contents":{"tnHighlights":[[497,"HighlightGroup"]],"tnSpan":[497,497],"tnText":""},"tag":"Create"}],[498,{"contents":{"tnHighlights":[[497,"HighlightGroup"],[499,"HighlightGroup"]],"tnSpan":[497,499],"tnText":""},"tag":"Create"}],[499,{"contents":{"tnHighlights":[[499,"HighlightGroup"]],"tnSpan":[499,499],"tnText":""},"tag":"Create"}],[500,{"contents":{"tnHighlights":[[498,"HighlightGroup"],[501,"HighlightGroup"]],"tnSpan":[497,501],"tnText":""},"tag":"Create"}],[501,{"contents":{"tnHighlights":[[501,"HighlightGroup"]],"tnSpan":[501,501],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[494,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"]},"tag":"Update"}],[496,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[497,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}],[40,{"contents":[{"rsbBlockId":40,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":73,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[41,{"contents":[{"rsbBlockId":41,"rsbHtml":"<div class=\"prose-block\"><p>The following variant is guaranteed to evaluate the CDF only once.</p>\n</div>","rsbLexemeList":[],"rsbLine":74,"rsbNumLines":2,"rsbText":"'The following variant is guaranteed to evaluate the CDF only once.\n\n"},"Inert",[]],"tag":"Create"}],[42,{"contents":[{"rsbBlockId":42,"rsbHtml":"<div class=\"code-block\"><span class=\"keyword\" id=\"span_42_503\">def</span><span> </span><span id=\"span_42_504\">binomialBatch</span><span class=\"symbol\" id=\"span_42_506\">(</span><span id=\"span_42_507\">n</span><span class=\"symbol\" id=\"span_42_508\">:</span><span id=\"span_42_510\">Nat</span><span class=\"symbol\" id=\"span_42_511\">,</span><span> </span><span id=\"span_42_512\">p</span><span class=\"symbol\" id=\"span_42_513\">:</span><span id=\"span_42_515\">Prob</span><span class=\"symbol\" id=\"span_42_516\">,</span><span> </span><span id=\"span_42_517\">k</span><span class=\"symbol\" id=\"span_42_518\">:</span><span id=\"span_42_520\">Key</span><span class=\"symbol\" id=\"span_42_521\">)</span><span> </span><span class=\"symbol\" id=\"span_42_522\">-&gt;</span><span> </span><span id=\"span_42_523\">a</span><span> </span><span class=\"symbol\" id=\"span_42_524\">=&gt;</span><span> </span><span id=\"span_42_526\">Nat</span><span> </span><span class=\"keyword\" id=\"span_42_527\">given</span><span> </span><span class=\"symbol\" id=\"span_42_529\">(</span><span id=\"span_42_530\">a</span><span class=\"symbol\" id=\"span_42_531\">|</span><span id=\"span_42_533\">Ix</span><span class=\"symbol\" id=\"span_42_534\">)</span><span> </span><span class=\"symbol\" id=\"span_42_535\">=</span><span class=\"comment\">\n  </span><span id=\"span_42_538\">m</span><span> </span><span class=\"symbol\" id=\"span_42_539\">=</span><span> </span><span id=\"span_42_540\">n</span><span> </span><span class=\"symbol\" id=\"span_42_541\">+</span><span> </span><span class=\"literal\" id=\"span_42_543\">1</span><span class=\"comment\">\n  </span><span id=\"span_42_545\">logprobs</span><span> </span><span class=\"symbol\" id=\"span_42_546\">=</span><span> </span><span class=\"keyword\" id=\"span_42_548\">for</span><span> </span><span id=\"span_42_549\">i</span><span class=\"symbol\" id=\"span_42_550\">:</span><span class=\"symbol\" id=\"span_42_553\">(</span><span id=\"span_42_554\">Fin</span><span> </span><span id=\"span_42_556\">m</span><span class=\"symbol\" id=\"span_42_557\">)</span><span class=\"symbol\" id=\"span_42_558\">.</span><span> </span><span id=\"span_42_559\">logBinomialProb</span><span> </span><span id=\"span_42_561\">n</span><span> </span><span id=\"span_42_563\">p</span><span> </span><span class=\"symbol\" id=\"span_42_564\">$</span><span> </span><span id=\"span_42_566\">ordinal</span><span> </span><span id=\"span_42_568\">i</span><span class=\"comment\">\n  </span><span id=\"span_42_570\">map</span><span> </span><span id=\"span_42_572\">ordinal</span><span> </span><span class=\"symbol\" id=\"span_42_573\">$</span><span> </span><span id=\"span_42_575\">categorical_batch</span><span> </span><span id=\"span_42_577\">logprobs</span><span> </span><span id=\"span_42_579\">k</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[503,504,506,507,508,510,511,512,513,515,516,517,518,520,521,522,523,524,526,527,529,530,531,533,534,535,538,539,540,541,543,545,546,548,549,550,553,554,556,557,558,559,561,563,564,566,568,570,572,573,575,577,579],"rsbLine":76,"rsbNumLines":4,"rsbText":"def binomialBatch(n:Nat, p:Prob, k:Key) -> a => Nat given (a|Ix) =\n  m = n + 1\n  logprobs = for i:(Fin m). logBinomialProb n p $ ordinal i\n  map ordinal $ categorical_batch logprobs k\n"},"CompleteWithErrors",[{"contents":[[503,502],[504,504],[506,505],[507,507],[508,509],[510,510],[511,505],[512,512],[513,514],[515,515],[516,505],[517,517],[518,519],[520,520],[521,505],[522,502],[523,523],[524,525],[526,526],[527,502],[529,528],[530,530],[531,532],[533,533],[534,528],[535,502],[538,538],[539,537],[540,540],[541,541],[543,543],[545,545],[546,544],[548,547],[549,549],[550,551],[553,552],[554,554],[556,556],[557,552],[558,547],[559,559],[561,561],[563,563],[564,565],[566,566],[568,568],[570,570],[572,572],[573,574],[575,575],[577,577],[579,579]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[502,"HighlightGroup"]],"tnSpan":[503,579],"tnText":""},"tag":"Create"}],[502,{"contents":{"tnHighlights":[[503,"HighlightLeaf"],[522,"HighlightLeaf"],[527,"HighlightLeaf"],[535,"HighlightLeaf"],[504,"HighlightGroup"],[505,"HighlightGroup"],[525,"HighlightGroup"],[528,"HighlightGroup"],[536,"HighlightGroup"]],"tnSpan":[503,579],"tnText":""},"tag":"Create"}],[503,{"contents":{"tnHighlights":[[503,"HighlightGroup"]],"tnSpan":[503,503],"tnText":""},"tag":"Create"}],[504,{"contents":{"tnHighlights":[[504,"HighlightGroup"]],"tnSpan":[504,504],"tnText":""},"tag":"Create"}],[505,{"contents":{"tnHighlights":[[506,"HighlightLeaf"],[511,"HighlightLeaf"],[516,"HighlightLeaf"],[521,"HighlightLeaf"],[509,"HighlightGroup"],[514,"HighlightGroup"],[519,"HighlightGroup"]],"tnSpan":[506,521],"tnText":""},"tag":"Create"}],[506,{"contents":{"tnHighlights":[[506,"HighlightGroup"]],"tnSpan":[506,506],"tnText":""},"tag":"Create"}],[507,{"contents":{"tnHighlights":[[507,"HighlightGroup"]],"tnSpan":[507,507],"tnText":""},"tag":"Create"}],[508,{"contents":{"tnHighlights":[[508,"HighlightGroup"]],"tnSpan":[508,508],"tnText":""},"tag":"Create"}],[509,{"contents":{"tnHighlights":[[508,"HighlightLeaf"],[507,"HighlightGroup"],[510,"HighlightGroup"]],"tnSpan":[507,510],"tnText":""},"tag":"Create"}],[510,{"contents":{"tnHighlights":[[510,"HighlightGroup"]],"tnSpan":[510,510],"tnText":""},"tag":"Create"}],[511,{"contents":{"tnHighlights":[[511,"HighlightGroup"]],"tnSpan":[511,511],"tnText":""},"tag":"Create"}],[512,{"contents":{"tnHighlights":[[512,"HighlightGroup"]],"tnSpan":[512,512],"tnText":""},"tag":"Create"}],[513,{"contents":{"tnHighlights":[[513,"HighlightGroup"]],"tnSpan":[513,513],"tnText":""},"tag":"Create"}],[514,{"contents":{"tnHighlights":[[513,"HighlightLeaf"],[512,"HighlightGroup"],[515,"HighlightGroup"]],"tnSpan":[512,515],"tnText":""},"tag":"Create"}],[515,{"contents":{"tnHighlights":[[515,"HighlightGroup"]],"tnSpan":[515,515],"tnText":""},"tag":"Create"}],[516,{"contents":{"tnHighlights":[[516,"HighlightGroup"]],"tnSpan":[516,516],"tnText":""},"tag":"Create"}],[517,{"contents":{"tnHighlights":[[517,"HighlightGroup"]],"tnSpan":[517,517],"tnText":""},"tag":"Create"}],[518,{"contents":{"tnHighlights":[[518,"HighlightGroup"]],"tnSpan":[518,518],"tnText":""},"tag":"Create"}],[519,{"contents":{"tnHighlights":[[518,"HighlightLeaf"],[517,"HighlightGroup"],[520,"HighlightGroup"]],"tnSpan":[517,520],"tnText":""},"tag":"Create"}],[520,{"contents":{"tnHighlights":[[520,"HighlightGroup"]],"tnSpan":[520,520],"tnText":""},"tag":"Create"}],[521,{"contents":{"tnHighlights":[[521,"HighlightGroup"]],"tnSpan":[521,521],"tnText":""},"tag":"Create"}],[522,{"contents":{"tnHighlights":[[522,"HighlightGroup"]],"tnSpan":[522,522],"tnText":""},"tag":"Create"}],[523,{"contents":{"tnHighlights":[[523,"HighlightGroup"]],"tnSpan":[523,523],"tnText":""},"tag":"Create"}],[524,{"contents":{"tnHighlights":[[524,"HighlightGroup"]],"tnSpan":[524,524],"tnText":""},"tag":"Create"}],[525,{"contents":{"tnHighlights":[[524,"HighlightLeaf"],[523,"HighlightGroup"],[526,"HighlightGroup"]],"tnSpan":[523,526],"tnText":""},"tag":"Create"}],[526,{"contents":{"tnHighlights":[[526,"HighlightGroup"]],"tnSpan":[526,526],"tnText":""},"tag":"Create"}],[527,{"contents":{"tnHighlights":[[527,"HighlightGroup"]],"tnSpan":[527,527],"tnText":""},"tag":"Create"}],[528,{"contents":{"tnHighlights":[[529,"HighlightLeaf"],[534,"HighlightLeaf"],[532,"HighlightGroup"]],"tnSpan":[529,534],"tnText":""},"tag":"Create"}],[529,{"contents":{"tnHighlights":[[529,"HighlightGroup"]],"tnSpan":[529,529],"tnText":""},"tag":"Create"}],[530,{"contents":{"tnHighlights":[[530,"HighlightGroup"]],"tnSpan":[530,530],"tnText":""},"tag":"Create"}],[531,{"contents":{"tnHighlights":[[531,"HighlightGroup"]],"tnSpan":[531,531],"tnText":""},"tag":"Create"}],[532,{"contents":{"tnHighlights":[[531,"HighlightLeaf"],[530,"HighlightGroup"],[533,"HighlightGroup"]],"tnSpan":[530,533],"tnText":""},"tag":"Create"}],[533,{"contents":{"tnHighlights":[[533,"HighlightGroup"]],"tnSpan":[533,533],"tnText":""},"tag":"Create"}],[534,{"contents":{"tnHighlights":[[534,"HighlightGroup"]],"tnSpan":[534,534],"tnText":""},"tag":"Create"}],[535,{"contents":{"tnHighlights":[[535,"HighlightGroup"]],"tnSpan":[535,535],"tnText":""},"tag":"Create"}],[536,{"contents":{"tnHighlights":[[537,"HighlightGroup"],[544,"HighlightGroup"],[569,"HighlightGroup"]],"tnSpan":[538,579],"tnText":""},"tag":"Create"}],[537,{"contents":{"tnHighlights":[[539,"HighlightLeaf"],[538,"HighlightGroup"],[542,"HighlightGroup"]],"tnSpan":[538,543],"tnText":""},"tag":"Create"}],[538,{"contents":{"tnHighlights":[[538,"HighlightGroup"]],"tnSpan":[538,538],"tnText":""},"tag":"Create"}],[539,{"contents":{"tnHighlights":[[539,"HighlightGroup"]],"tnSpan":[539,539],"tnText":""},"tag":"Create"}],[540,{"contents":{"tnHighlights":[[540,"HighlightGroup"]],"tnSpan":[540,540],"tnText":""},"tag":"Create"}],[541,{"contents":{"tnHighlights":[[541,"HighlightGroup"]],"tnSpan":[541,541],"tnText":""},"tag":"Create"}],[542,{"contents":{"tnHighlights":[[540,"HighlightGroup"],[541,"HighlightGroup"],[543,"HighlightGroup"]],"tnSpan":[540,543],"tnText":""},"tag":"Create"}],[543,{"contents":{"tnHighlights":[[543,"HighlightGroup"]],"tnSpan":[543,543],"tnText":""},"tag":"Create"}],[544,{"contents":{"tnHighlights":[[546,"HighlightLeaf"],[545,"HighlightGroup"],[547,"HighlightGroup"]],"tnSpan":[545,568],"tnText":""},"tag":"Create"}],[545,{"contents":{"tnHighlights":[[545,"HighlightGroup"]],"tnSpan":[545,545],"tnText":""},"tag":"Create"}],[546,{"contents":{"tnHighlights":[[546,"HighlightGroup"]],"tnSpan":[546,546],"tnText":""},"tag":"Create"}],[547,{"contents":{"tnHighlights":[[548,"HighlightLeaf"],[558,"HighlightLeaf"],[551,"HighlightGroup"],[565,"HighlightGroup"]],"tnSpan":[548,568],"tnText":""},"tag":"Create"}],[548,{"contents":{"tnHighlights":[[548,"HighlightGroup"]],"tnSpan":[548,548],"tnText":""},"tag":"Create"}],[549,{"contents":{"tnHighlights":[[549,"HighlightGroup"]],"tnSpan":[549,549],"tnText":""},"tag":"Create"}],[550,{"contents":{"tnHighlights":[[550,"HighlightGroup"]],"tnSpan":[550,550],"tnText":""},"tag":"Create"}],[551,{"contents":{"tnHighlights":[[550,"HighlightLeaf"],[549,"HighlightGroup"],[552,"HighlightGroup"]],"tnSpan":[549,557],"tnText":""},"tag":"Create"}],[552,{"contents":{"tnHighlights":[[553,"HighlightLeaf"],[557,"HighlightLeaf"],[555,"HighlightGroup"]],"tnSpan":[553,557],"tnText":""},"tag":"Create"}],[553,{"contents":{"tnHighlights":[[553,"HighlightGroup"]],"tnSpan":[553,553],"tnText":""},"tag":"Create"}],[554,{"contents":{"tnHighlights":[[554,"HighlightGroup"]],"tnSpan":[554,554],"tnText":""},"tag":"Create"}],[555,{"contents":{"tnHighlights":[[554,"HighlightGroup"],[556,"HighlightGroup"]],"tnSpan":[554,556],"tnText":""},"tag":"Create"}],[556,{"contents":{"tnHighlights":[[556,"HighlightGroup"]],"tnSpan":[556,556],"tnText":""},"tag":"Create"}],[557,{"contents":{"tnHighlights":[[557,"HighlightGroup"]],"tnSpan":[557,557],"tnText":""},"tag":"Create"}],[558,{"contents":{"tnHighlights":[[558,"HighlightGroup"]],"tnSpan":[558,558],"tnText":""},"tag":"Create"}],[559,{"contents":{"tnHighlights":[[559,"HighlightGroup"]],"tnSpan":[559,559],"tnText":""},"tag":"Create"}],[560,{"contents":{"tnHighlights":[[559,"HighlightGroup"],[561,"HighlightGroup"]],"tnSpan":[559,561],"tnText":""},"tag":"Create"}],[561,{"contents":{"tnHighlights":[[561,"HighlightGroup"]],"tnSpan":[561,561],"tnText":""},"tag":"Create"}],[562,{"contents":{"tnHighlights":[[560,"HighlightGroup"],[563,"HighlightGroup"]],"tnSpan":[559,563],"tnText":""},"tag":"Create"}],[563,{"contents":{"tnHighlights":[[563,"HighlightGroup"]],"tnSpan":[563,563],"tnText":""},"tag":"Create"}],[564,{"contents":{"tnHighlights":[[564,"HighlightGroup"]],"tnSpan":[564,564],"tnText":""},"tag":"Create"}],[565,{"contents":{"tnHighlights":[[564,"HighlightLeaf"],[562,"HighlightGroup"],[567,"HighlightGroup"]],"tnSpan":[559,568],"tnText":""},"tag":"Create"}],[566,{"contents":{"tnHighlights":[[566,"HighlightGroup"]],"tnSpan":[566,566],"tnText":""},"tag":"Create"}],[567,{"contents":{"tnHighlights":[[566,"HighlightGroup"],[568,"HighlightGroup"]],"tnSpan":[566,568],"tnText":""},"tag":"Create"}],[568,{"contents":{"tnHighlights":[[568,"HighlightGroup"]],"tnSpan":[568,568],"tnText":""},"tag":"Create"}],[569,{"contents":{"tnHighlights":[[574,"HighlightGroup"]],"tnSpan":[570,579],"tnText":""},"tag":"Create"}],[570,{"contents":{"tnHighlights":[[570,"HighlightGroup"]],"tnSpan":[570,570],"tnText":""},"tag":"Create"}],[571,{"contents":{"tnHighlights":[[570,"HighlightGroup"],[572,"HighlightGroup"]],"tnSpan":[570,572],"tnText":""},"tag":"Create"}],[572,{"contents":{"tnHighlights":[[572,"HighlightGroup"]],"tnSpan":[572,572],"tnText":""},"tag":"Create"}],[573,{"contents":{"tnHighlights":[[573,"HighlightGroup"]],"tnSpan":[573,573],"tnText":""},"tag":"Create"}],[574,{"contents":{"tnHighlights":[[573,"HighlightLeaf"],[571,"HighlightGroup"],[578,"HighlightGroup"]],"tnSpan":[570,579],"tnText":""},"tag":"Create"}],[575,{"contents":{"tnHighlights":[[575,"HighlightGroup"]],"tnSpan":[575,575],"tnText":""},"tag":"Create"}],[576,{"contents":{"tnHighlights":[[575,"HighlightGroup"],[577,"HighlightGroup"]],"tnSpan":[575,577],"tnText":""},"tag":"Create"}],[577,{"contents":{"tnHighlights":[[577,"HighlightGroup"]],"tnSpan":[577,577],"tnText":""},"tag":"Create"}],[578,{"contents":{"tnHighlights":[[576,"HighlightGroup"],[579,"HighlightGroup"]],"tnSpan":[575,579],"tnText":""},"tag":"Create"}],[579,{"contents":{"tnHighlights":[[579,"HighlightGroup"]],"tnSpan":[579,579],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[507,{"contents":{"tnuHighlights":[[507,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[510,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[512,{"contents":{"tnuHighlights":[[512,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[515,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\nProb    = Float\n"]},"tag":"Update"}],[517,{"contents":{"tnuHighlights":[[517,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[520,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nKey = Word64\n"]},"tag":"Update"}],[523,{"contents":{"tnuHighlights":[[530,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[530,{"contents":{"tnuHighlights":[[523,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[526,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\nNat = %Nat()\n"]},"tag":"Update"}],[530,{"contents":{"tnuHighlights":[[530,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[530,{"contents":{"tnuHighlights":[[530,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[533,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[538,{"contents":{"tnuHighlights":[[538,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[540,{"contents":{"tnuHighlights":[[507,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[507,{"contents":{"tnuHighlights":[[540,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[541,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Add(a|Data)\n  (+) : (a, a) -> a\n  zero : a\n"]},"tag":"Update"}],[545,{"contents":{"tnuHighlights":[[545,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[549,{"contents":{"tnuHighlights":[[549,"HighlightBinder"]],"tnuText":[]},"tag":"Update"}],[554,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef Fin(n:Nat) -> Type = %Fin(n)\n"]},"tag":"Update"}],[556,{"contents":{"tnuHighlights":[[538,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[538,{"contents":{"tnuHighlights":[[556,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[559,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef logBinomialProb(n':Nat, p:Prob, counts':Nat) -> LogProb =\n  n      = n_to_f n'\n  counts = n_to_f counts'\n  pSuccess = log p * counts\n  pFailure = log1p (-p) * (n - counts)\n  normConst = (lbeta (1. + counts) (1. + n - counts) +\n               log1p (n))\n  pSuccess + pFailure - normConst\n"]},"tag":"Update"}],[561,{"contents":{"tnuHighlights":[[507,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[507,{"contents":{"tnuHighlights":[[561,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[563,{"contents":{"tnuHighlights":[[512,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[512,{"contents":{"tnuHighlights":[[563,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}],[566,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ninterface Ix(n|Data)\n  size' : () -> Nat\n  ordinal : (n) -> Nat\n  unsafe_from_ordinal : (Nat) -> n\n"]},"tag":"Update"}],[568,{"contents":{"tnuHighlights":[[549,"HighlightBinder"]],"tnuText":["Local name"]},"tag":"Update"}],[549,{"contents":{"tnuHighlights":[[568,"HighlightOcc"]],"tnuText":[]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[570,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}],[43,{"contents":[{"rsbBlockId":43,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":80,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[44,{"contents":[{"rsbBlockId":44,"rsbHtml":"<div class=\"code-block\"><span id=\"span_44_581\">inversionBatchSamples</span><span> </span><span class=\"symbol\" id=\"span_44_582\">=</span><span> </span><span class=\"symbol\" id=\"span_44_584\">(</span><span id=\"span_44_585\">binomialBatch</span><span> </span><span id=\"span_44_587\">n</span><span> </span><span id=\"span_44_589\">p</span><span> </span><span id=\"span_44_591\">k0</span><span class=\"symbol\" id=\"span_44_592\">)</span><span> </span><span class=\"symbol\" id=\"span_44_593\">::</span><span> </span><span id=\"span_44_595\">Fin</span><span> </span><span id=\"span_44_597\">numSamples</span><span> </span><span class=\"symbol\" id=\"span_44_598\">=&gt;</span><span> </span><span id=\"span_44_600\">Nat</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[581,582,584,585,587,589,591,592,593,595,597,598,600],"rsbLine":81,"rsbNumLines":1,"rsbText":"inversionBatchSamples = (binomialBatch n p k0) :: Fin numSamples => Nat\n"},"CompleteWithErrors",[{"contents":[[581,581],[582,580],[584,583],[585,585],[587,587],[589,589],[591,591],[592,583],[593,594],[595,595],[597,597],[598,599],[600,600]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[580,"HighlightGroup"]],"tnSpan":[581,600],"tnText":""},"tag":"Create"}],[580,{"contents":{"tnHighlights":[[582,"HighlightLeaf"],[581,"HighlightGroup"],[594,"HighlightGroup"]],"tnSpan":[581,600],"tnText":""},"tag":"Create"}],[581,{"contents":{"tnHighlights":[[581,"HighlightGroup"]],"tnSpan":[581,581],"tnText":""},"tag":"Create"}],[582,{"contents":{"tnHighlights":[[582,"HighlightGroup"]],"tnSpan":[582,582],"tnText":""},"tag":"Create"}],[583,{"contents":{"tnHighlights":[[584,"HighlightLeaf"],[592,"HighlightLeaf"],[590,"HighlightGroup"]],"tnSpan":[584,592],"tnText":""},"tag":"Create"}],[584,{"contents":{"tnHighlights":[[584,"HighlightGroup"]],"tnSpan":[584,584],"tnText":""},"tag":"Create"}],[585,{"contents":{"tnHighlights":[[585,"HighlightGroup"]],"tnSpan":[585,585],"tnText":""},"tag":"Create"}],[586,{"contents":{"tnHighlights":[[585,"HighlightGroup"],[587,"HighlightGroup"]],"tnSpan":[585,587],"tnText":""},"tag":"Create"}],[587,{"contents":{"tnHighlights":[[587,"HighlightGroup"]],"tnSpan":[587,587],"tnText":""},"tag":"Create"}],[588,{"contents":{"tnHighlights":[[586,"HighlightGroup"],[589,"HighlightGroup"]],"tnSpan":[585,589],"tnText":""},"tag":"Create"}],[589,{"contents":{"tnHighlights":[[589,"HighlightGroup"]],"tnSpan":[589,589],"tnText":""},"tag":"Create"}],[590,{"contents":{"tnHighlights":[[588,"HighlightGroup"],[591,"HighlightGroup"]],"tnSpan":[585,591],"tnText":""},"tag":"Create"}],[591,{"contents":{"tnHighlights":[[591,"HighlightGroup"]],"tnSpan":[591,591],"tnText":""},"tag":"Create"}],[592,{"contents":{"tnHighlights":[[592,"HighlightGroup"]],"tnSpan":[592,592],"tnText":""},"tag":"Create"}],[593,{"contents":{"tnHighlights":[[593,"HighlightGroup"]],"tnSpan":[593,593],"tnText":""},"tag":"Create"}],[594,{"contents":{"tnHighlights":[[593,"HighlightLeaf"],[583,"HighlightGroup"],[599,"HighlightGroup"]],"tnSpan":[584,600],"tnText":""},"tag":"Create"}],[595,{"contents":{"tnHighlights":[[595,"HighlightGroup"]],"tnSpan":[595,595],"tnText":""},"tag":"Create"}],[596,{"contents":{"tnHighlights":[[595,"HighlightGroup"],[597,"HighlightGroup"]],"tnSpan":[595,597],"tnText":""},"tag":"Create"}],[597,{"contents":{"tnHighlights":[[597,"HighlightGroup"]],"tnSpan":[597,597],"tnText":""},"tag":"Create"}],[598,{"contents":{"tnHighlights":[[598,"HighlightGroup"]],"tnSpan":[598,598],"tnText":""},"tag":"Create"}],[599,{"contents":{"tnHighlights":[[598,"HighlightLeaf"],[596,"HighlightGroup"],[600,"HighlightGroup"]],"tnSpan":[595,600],"tnText":""},"tag":"Create"}],[600,{"contents":{"tnHighlights":[[600,"HighlightGroup"]],"tnSpan":[600,600],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[],"tag":"RenderedTreeNodeUpdate"},{"contents":[585,"Name error: error in (earlier) definition of variable: binomialBatch"],"tag":"RenderedError"}]],"tag":"Create"}],[45,{"contents":[{"rsbBlockId":45,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":82,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[46,{"contents":[{"rsbBlockId":46,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_46_601\">p</span><span> </span><span id=\"span_46_602\">slice</span><span> </span><span id=\"span_46_604\">inversionBatchSamples</span><span> </span><span class=\"literal\" id=\"span_46_606\">0</span><span> </span><span class=\"symbol\" id=\"span_46_607\">$</span><span> </span><span id=\"span_46_609\">Fin</span><span> </span><span class=\"literal\" id=\"span_46_611\">10</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[601,602,604,606,607,609,611],"rsbLine":83,"rsbNumLines":1,"rsbText":":p slice inversionBatchSamples 0 $ Fin 10\n"},"CompleteWithErrors",[{"contents":[[602,602],[604,604],[606,606],[607,608],[609,609],[611,611]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[608,"HighlightGroup"]],"tnSpan":[602,611],"tnText":""},"tag":"Create"}],[602,{"contents":{"tnHighlights":[[602,"HighlightGroup"]],"tnSpan":[602,602],"tnText":""},"tag":"Create"}],[603,{"contents":{"tnHighlights":[[602,"HighlightGroup"],[604,"HighlightGroup"]],"tnSpan":[602,604],"tnText":""},"tag":"Create"}],[604,{"contents":{"tnHighlights":[[604,"HighlightGroup"]],"tnSpan":[604,604],"tnText":""},"tag":"Create"}],[605,{"contents":{"tnHighlights":[[603,"HighlightGroup"],[606,"HighlightGroup"]],"tnSpan":[602,606],"tnText":""},"tag":"Create"}],[606,{"contents":{"tnHighlights":[[606,"HighlightGroup"]],"tnSpan":[606,606],"tnText":""},"tag":"Create"}],[607,{"contents":{"tnHighlights":[[607,"HighlightGroup"]],"tnSpan":[607,607],"tnText":""},"tag":"Create"}],[608,{"contents":{"tnHighlights":[[607,"HighlightLeaf"],[605,"HighlightGroup"],[610,"HighlightGroup"]],"tnSpan":[602,611],"tnText":""},"tag":"Create"}],[609,{"contents":{"tnHighlights":[[609,"HighlightGroup"]],"tnSpan":[609,609],"tnText":""},"tag":"Create"}],[610,{"contents":{"tnHighlights":[[609,"HighlightGroup"],[611,"HighlightGroup"]],"tnSpan":[609,611],"tnText":""},"tag":"Create"}],[611,{"contents":{"tnHighlights":[[611,"HighlightGroup"]],"tnSpan":[611,611],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[602,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef slice(xs:n=>a, start:Nat, m|Ix) -> m=>a given (n|Ix, a:Type) =\n  for i. xs[from_ordinal (ordinal i + start)]\n"]},"tag":"Update"}],[608,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[604,"Name error: error in (earlier) definition of variable: inversionBatchSamples"],"tag":"RenderedError"}]],"tag":"Create"}],[47,{"contents":[{"rsbBlockId":47,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">\n</span></div>","rsbLexemeList":[],"rsbLine":85,"rsbNumLines":1,"rsbText":"\n"},"Inert",[]],"tag":"Create"}],[48,{"contents":[{"rsbBlockId":48,"rsbHtml":"<div class=\"code-block\"><span class=\"comment\">:</span><span id=\"span_48_612\">p</span><span> </span><span id=\"span_48_613\">meanAndVariance</span><span> </span><span class=\"symbol\" id=\"span_48_614\">$</span><span> </span><span id=\"span_48_616\">map</span><span> </span><span id=\"span_48_618\">n_to_f</span><span> </span><span id=\"span_48_620\">inversionBatchSamples</span><span class=\"comment\">\n</span></div>","rsbLexemeList":[612,613,614,616,618,620],"rsbLine":86,"rsbNumLines":1,"rsbText":":p meanAndVariance $ map n_to_f inversionBatchSamples\n"},"CompleteWithErrors",[{"contents":[[613,613],[614,615],[616,616],[618,618],[620,620]],"tag":"RenderedFocusUpdate"},{"contents":[[0,{"contents":{"tnHighlights":[[615,"HighlightGroup"]],"tnSpan":[613,620],"tnText":""},"tag":"Create"}],[613,{"contents":{"tnHighlights":[[613,"HighlightGroup"]],"tnSpan":[613,613],"tnText":""},"tag":"Create"}],[614,{"contents":{"tnHighlights":[[614,"HighlightGroup"]],"tnSpan":[614,614],"tnText":""},"tag":"Create"}],[615,{"contents":{"tnHighlights":[[614,"HighlightLeaf"],[613,"HighlightGroup"],[619,"HighlightGroup"]],"tnSpan":[613,620],"tnText":""},"tag":"Create"}],[616,{"contents":{"tnHighlights":[[616,"HighlightGroup"]],"tnSpan":[616,616],"tnText":""},"tag":"Create"}],[617,{"contents":{"tnHighlights":[[616,"HighlightGroup"],[618,"HighlightGroup"]],"tnSpan":[616,618],"tnText":""},"tag":"Create"}],[618,{"contents":{"tnHighlights":[[618,"HighlightGroup"]],"tnSpan":[618,618],"tnText":""},"tag":"Create"}],[619,{"contents":{"tnHighlights":[[617,"HighlightGroup"],[620,"HighlightGroup"]],"tnSpan":[616,620],"tnText":""},"tag":"Create"}],[620,{"contents":{"tnHighlights":[[620,"HighlightGroup"]],"tnSpan":[620,620],"tnText":""},"tag":"Create"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":["Parse",null],"tag":"RenderedPassResult"},{"contents":[[613,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in main:\ndef meanAndVariance(xs:n=>Float) -> (Float, Float) given (n|Ix) = (mean xs, sq $ std xs)\n"]},"tag":"Update"}],[615,{"contents":{"tnuHighlights":[],"tnuText":["Top-level name defined in prelude:\ndef show_any(x:a) -> String given (a:Type) = unsafe_coerce(to=String, %showAny(x))\n"]},"tag":"Update"}]],"tag":"RenderedTreeNodeUpdate"},{"contents":[616,"Name error: variable not in scope: map"],"tag":"RenderedError"}]],"tag":"Create"}]],"orderedNodesUpdate":{"newTail":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48],"numDropped":0}}